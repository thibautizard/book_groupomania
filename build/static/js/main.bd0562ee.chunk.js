(this.webpackJsonpgroupomania=this.webpackJsonpgroupomania||[]).push([[0],{172:function(e,t,a){},226:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),s=a.n(r),i=a(21),c=a(22),l=(a(172),a(147)),p=a.n(l),d=a(148),u=a(135),h=a(19),j=a.n(h),m=a(11),b=a(74),O=a(137),x=a(29),f=a(5),g="SET_AUTHENTICATED",y="SET_UNAUTHENTICATED",v="SET_USER",C="LOADING_USER",I="SET_ERRORS",S="LOADING_UI",k="CLEAR_ERRORS",w="LOADING_DATA",N="STOP_LOADING_UI",P="SET_POSTS",U="SET_POSTS_USER",T="SET_POST",F="SET_MORE_POSTS",D="LIKE_POST",E="UNLIKE_POST",A="DELETE_POST",B="CREATE_POST",W="SUBMIT_COMMENT",M="DELETE_COMMENT",R={authenticated:!1,loading:!1,credentials:{},likes:[],notifications:[]},z={posts:[],post:{},loading:!1},_={loading:!1,error:null},L=[O.a],Y=Object(b.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(f.a)(Object(f.a)({},e),{},{authenticated:!0,loading:!1});case y:return R;case v:return{authenticated:!0,loading:!1,credentials:t.payload.user,likes:t.payload.likes};case C:return Object(f.a)(Object(f.a)({},e),{},{loading:!0});case D:return Object(f.a)(Object(f.a)({},e),{},{likes:[].concat(Object(x.a)(e.likes),[{userHandle:e.credentials.handle,postId:t.payload.postId}])});case E:return Object(f.a)(Object(f.a)({},e),{},{likes:e.likes.filter((function(e){return e.postId!==t.payload.postId}))});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(f.a)(Object(f.a)({},e),{},{loading:!0});case P:return Object(f.a)(Object(f.a)({},e),{},{posts:t.payload,loading:!1});case F:return Object(f.a)(Object(f.a)({},e),{},{posts:[].concat(Object(x.a)(e.posts),Object(x.a)(t.payload)),loading:!1});case U:return Object(f.a)(Object(f.a)({},e),{},{posts:t.payload,loading:!1});case T:return Object(f.a)(Object(f.a)({},e),{},{post:t.payload,loading:!1});case D:var a=e.posts.findIndex((function(e){return e.postId===t.payload.postId}));return e.posts[a]=t.payload,e.post.postId===t.payload.postId&&(e.post=t.payload),Object(f.a)({},e);case E:var n=e.posts.findIndex((function(e){return e.postId===t.payload.postId}));return e.posts[n]=t.payload,e.post.postId===t.payload.postId&&(e.post=t.payload),Object(f.a)({},e);case A:var o=e.posts.findIndex((function(e){return e.postId===t.payload}));return e.posts.splice(o,1),Object(f.a)({},e);case B:return Object(f.a)(Object(f.a)({},e),{},{posts:t.payload});case W:var r=e.posts.findIndex((function(e){return e.postId===t.payload.post.postId}));return e.posts[r]=t.payload.post,Object(f.a)(Object(f.a)({},e),{},{post:Object(f.a)(Object(f.a)({},t.payload.post),{},{comments:[t.payload.comment].concat(Object(x.a)(e.post.comments))})});case M:var s=e.post.comments.findIndex((function(e){return e.commentId===t.payload}));return e.post.comments.splice(s,1),Object(f.a)(Object(f.a)({},e),{},{post:Object(f.a)(Object(f.a)({},e.post),{},{comments:e.post.comments})});default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(f.a)(Object(f.a)({},e),{},{loading:!1,errors:t.payload});case k:return Object(f.a)(Object(f.a)({},e),{},{loading:!1,errors:null});case S:return Object(f.a)(Object(f.a)({},e),{},{loading:!0});case N:return Object(f.a)(Object(f.a)({},e),{},{loading:!1});default:return e}}}),H=Object(b.d)(Y,{},Object(b.c)(b.a.apply(void 0,L))),V=function(){return function(e){localStorage.removeItem("FBIdtoken"),j.a.default.headers&&delete j.a.default.headers.common.Authorization,e({type:y})}},q=function(){return function(e){e({type:C}),j.a.get("https://projet7-oc-api.herokuapp.com/api/user/user").then((function(t){e({type:v,payload:t.data})})).catch((function(e){console.log(e)}))}},J=function(e){return function(t){t({type:C}),j.a.post("https://projet7-oc-api.herokuapp.com/api/user/uploadImage",e).then((function(){t(q())})).catch((function(e){console.log(e)}))}},G=function(e){var t="Bearer ".concat(e);localStorage.setItem("FBIdtoken",t),j.a.defaults.headers.common.Authorization=t},K=a(13),Q=a(10),X=a(15),Z=a(16),$=a(63),ee=a.n($),te=a(274),ae=a(259),ne=a(1),oe=function(e){var t=e.children,a=e.onClick,n=e.tip,o=e.btnClassName,r=e.tipClassName;return Object(ne.jsx)(te.a,{title:n,className:r,placement:"top",children:Object(ne.jsx)(ae.a,{onClick:a,className:o,children:t})})},re=a(65),se=a(89),ie=a(14),ce=a(18),le=a.n(ce),pe=a(263),de=a(273),ue=a(260),he=a(261),je=a(262),me=a(264),be=a(141),Oe=a.n(be),xe=a(72),fe=a.n(xe),ge=a(91),ye=a.n(ge),ve=function(e){return function(t){t({type:S}),j.a.post("https://projet7-oc-api.herokuapp.com/api/posts/createPost",e).then((function(e){t({type:B,payload:e.data}),t(Ie())})).catch((function(e){t({type:I,payload:e.response.data})}))}},Ce=function(e){return function(t){return j.a.post("https://projet7-oc-api.herokuapp.com/api/posts/uploadImagePost",e).then((function(e){return e.data.imageUrl})).catch((function(e){return console.log(e)}))}},Ie=function(){return function(e){e({type:k})}},Se=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={open:!1,body:"",errors:{},imageUrl:""},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){Ie(),e.setState({open:!1,errors:{},imageUrl:""})},e.handleChange=function(t){e.setState(Object(ie.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createPost({body:e.state.body,imageUrl:e.state.imageUrl})},e.handleEditPicture=function(){document.getElementById("imagePostInput").click()},e.handleImageChange=function(){var t=Object(se.a)(Object(re.a)().mark((function t(a){var n,o,r;return Object(re.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.files[0],(o=new FormData).append("image",n,"post"),o.append("pathToSave","public/images/posts/"),t.next=6,e.props.uploadImagePost(o);case 6:r=t.sent,e.setState({imageUrl:r});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(Q.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors}),e.UI.errors||e.UI.loading||(this.setState({body:"",open:!1,errors:{}}),this.handleClose())}},{key:"render",value:function(){var e=this.state,t=e.errors,a=e.imageUrl,o=this.props,r=o.classes,s=o.UI.loading;return Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(oe,{onClick:this.handleOpen,tip:"Cr\xe9er un post",children:Object(ne.jsx)(Oe.a,{color:"white"})}),Object(ne.jsxs)(ue.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm",children:[Object(ne.jsx)(oe,{tip:"Fermer",onClick:this.handleClose,tipClassName:r.closeButton,children:Object(ne.jsx)(fe.a,{})}),Object(ne.jsx)(he.a,{children:" Cr\xe9er un nouveau post "}),Object(ne.jsx)(je.a,{children:Object(ne.jsxs)("form",{onSubmit:this.handleSubmit,className:r.form,children:[a?Object(ne.jsx)("img",{src:a,className:r.imagePost,alt:"illustration post"}):Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)("input",{type:"file",id:"imagePostInput",onChange:this.handleImageChange,hidden:"hidden"}),Object(ne.jsx)(oe,{tip:"Ajouter un gif",onClick:this.handleEditPicture,children:Object(ne.jsx)(ye.a,{color:"primary",style:{fontSize:"80px"}})})]}),Object(ne.jsx)(de.a,{name:"body",type:"text",label:"Mon post",multiline:!0,rows:"3",placeholder:"\xc9crire ici un commentaire",error:!!t.body,helperText:t.body,className:r.textField,onChange:this.handleChange,fullWidth:!0}),Object(ne.jsxs)(pe.a,{type:"submit",variant:"contained",color:"primary",className:r.submitButton,disabled:s,children:["Poster",s&&Object(ne.jsx)(me.a,{size:30,className:r.progressSpinner})]})]})})]})]})}}]),a}(n.Component),ke=(Object(m.b)((function(e){return{UI:e.UI,data:e.data}}),{createPost:ve,uploadImagePost:Ce})(le()((function(e){return Object(f.a)(Object(f.a)({},e.spreadThis),{},{submitButton:{position:"relative",float:"right",marginTop:10},progressSpinner:{position:"absolute"},closeButton:{position:"absolute",left:"88%",top:"0%"},form:{display:"flex",flexDirection:"column",alignItems:"center"},addPhoto:{width:"120px",height:"120px"}})}))(Se)),a(39),a(265)),we=a(266),Ne=(a(275),a(267)),Pe=(a(276),a(151)),Ue=a(268),Te=(a(142),a.p+"static/media/groupomania-brand.e6dc3d26.png");Object(ke.a)((function(){return{header:{paddingLeft:"20px"},menuButton:{size:"18px",marginLeft:"38px"},toolbar:{display:"flex",justifyContent:"space-between"},drawerContainer:{padding:"20px 30px"}}}));var Fe=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){return Object(K.a)(this,a),t.apply(this,arguments)}return Object(Q.a)(a,[{key:"render",value:function(){this.props.authenticated;return Object(ne.jsxs)(Ue.a,{position:"fixed",children:[Object(ne.jsx)(ee.a,{to:"/",children:Object(ne.jsx)("img",{src:Te,alt:"groupomania brand",style:{width:"200px",position:"absolute",left:"50vw",top:"14px",transform:"translate(-50%, 0)"}})}),Object(ne.jsx)(we.a,{className:"nav-container"})]})}}]),a}(n.Component),De=Object(m.b)((function(e){return{authenticated:e.user.authenticated}}))(Fe),Ee=a(3),Ae=["component","authenticated"],Be=Object(m.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,a=e.authenticated,n=Object(Ee.a)(e,Ae);return Object(ne.jsx)(c.Route,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return!0===a?Object(ne.jsx)(c.Redirect,{to:"/"}):Object(ne.jsx)(t,Object(f.a)({},e))}}))})),We=["component","authenticated"],Me=Object(m.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,a=e.authenticated,n=Object(Ee.a)(e,We);return Object(ne.jsx)(c.Route,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return a?Object(ne.jsx)(t,Object(f.a)({},e)):Object(ne.jsx)(c.Redirect,{to:"/login"})}}))})),Re=a(272);a(226);function ze(){return Object(ne.jsx)("div",{className:"loadingio-spinner-dual-ball-ewdix10y24j",children:Object(ne.jsxs)("div",{className:"ldio-x72s767wdsh",children:[Object(ne.jsx)("div",{}),Object(ne.jsx)("div",{}),Object(ne.jsx)("div",{})]})})}var _e=a(269),Le=a(270),Ye=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={body:"",errors:{},imageUrl:""},e.handleChange=function(t){e.setState(Object(ie.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createPost({body:e.state.body,imageUrl:e.state.imageUrl}),e.state.body.length&&(e.setState({body:"",imageUrl:"",errors:{}}),document.querySelector("textarea").value="")},e.handleEditPicture=function(){document.getElementById("imagePostInput").click()},e.handleImageChange=function(){var t=Object(se.a)(Object(re.a)().mark((function t(a){var n,o,r;return Object(re.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.files[0],(o=new FormData).append("image",n,"post"),o.append("pathToSave","public/images/posts/"),t.next=6,e.props.uploadImagePost(o);case 6:r=t.sent,e.setState({imageUrl:r});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(Q.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors}),e.UI.errors||e.UI.loading||this.setState({body:"",errors:{}})}},{key:"render",value:function(){var e=this.state,t=e.errors,a=e.imageUrl,o=this.props,r=o.classes,s=o.UI.loading;return Object(ne.jsxs)(_e.a,{className:r.card,fullWidth:!0,children:[Object(ne.jsx)("h2",{className:r.title,children:" Partagez du contenu ! "}),Object(ne.jsx)("p",{style:{textAlign:"center",margin:"0",fontSize:"50px"},children:"\ud83d\udc47"}),Object(ne.jsx)(Le.a,{className:r.cardContent,children:Object(ne.jsx)("form",{onSubmit:this.handleSubmit,className:r.form,children:a?Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)("img",{src:a,className:r.imagePost,alt:"illustration post"}),Object(ne.jsx)(de.a,{name:"body",type:"text",label:"Un commentaire",multiline:!0,rows:"2",placeholder:"\xc9crire ici un commentaire",error:!!t.body,helperText:t.body,className:r.textField,onChange:this.handleChange,fullWidth:!0}),Object(ne.jsxs)(pe.a,{type:"submit",variant:"contained",color:"primary",className:r.submitButton,disabled:s,children:["Poster",s&&Object(ne.jsx)(me.a,{size:30,className:r.progressSpinner})]})]}):Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)("input",{type:"file",id:"imagePostInput",onChange:this.handleImageChange,hidden:"hidden"}),Object(ne.jsx)(oe,{tip:"Ajouter une image",onClick:this.handleEditPicture,children:Object(ne.jsx)(ye.a,{color:"primary",style:{fontSize:"60px"}})})]})})})]})}}]),a}(n.Component),He=Object(m.b)((function(e){return{UI:e.UI,data:e.data}}),{createPost:ve,uploadImagePost:Ce})(le()((function(e){return Object(f.a)(Object(f.a)({},e.spreadThis),{},{card:{position:"relative",marginBottom:20,padding:"0 30px",margin:"0 10px"},cardContent:{paddingTop:"0px"},title:{fontSize:"26px",textAlign:"center",marginBottom:"5px",fontWeight:"400",color:"rgb(15, 31, 65)"},submitButton:{position:"relative",float:"right",marginTop:10},progressSpinner:{position:"absolute"},closeButton:{position:"absolute",left:"88%",top:"0%"},form:{display:"flex",flexDirection:"column",alignItems:"center"},addPhoto:{width:"120px",height:"120px"}})}))(Ye)),Ve=a(144),qe=a(31),Je=a.n(qe),Ge=a(92),Ke=a.n(Ge),Qe=(a(133),a(271)),Xe=a(93),Ze=a.n(Xe),$e=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={open:!1},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.deletePost=function(){e.props.deletePost(e.props.postId),e.setState({open:!1})},e}return Object(Q.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(oe,{tip:"Supprimer le post",onClick:this.handleOpen,btnClassName:e.deleteButton,children:Object(ne.jsx)(Ze.a,{color:"secondary"})}),Object(ne.jsxs)(ue.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm",children:[Object(ne.jsx)(he.a,{children:"Voulez-vous vraiment supprimer ce post ?"}),Object(ne.jsxs)(Qe.a,{children:[Object(ne.jsx)(pe.a,{onClick:this.handleClose,color:"primary",children:"Annuler"}),Object(ne.jsx)(pe.a,{onClick:this.deletePost,color:"secondary",children:"Supprimer"})]})]})]})}}]),a}(n.Component),et=Object(m.b)(null,{deletePost:function(e){return function(t){j.a.delete("https://projet7-oc-api.herokuapp.com/api/posts/delete/".concat(e)).then((function(){t({type:A,payload:e})})).catch((function(e){return console.log(e)}))}}})(le()({deleteButton:{position:"absolute",right:"0px",top:"0px"}})($e)),tt=a(145),at=a.n(tt),nt=a(111),ot=a.n(nt),rt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).likedPost=function(){return!(!e.props.user.likes.length||!e.props.user.likes.find((function(t){return t.postId===e.props.postId})))},e.likePost=function(){e.props.likePost(e.props.postId)},e.unlikePost=function(){e.props.unlikePost(e.props.postId)},e}return Object(Q.a)(a,[{key:"render",value:function(){return this.props.user.authenticated?this.likedPost()?Object(ne.jsx)(oe,{tip:"Je n'aime plus",onClick:this.unlikePost,children:Object(ne.jsx)(at.a,{color:"primary"})}):Object(ne.jsx)(oe,{tip:"J'aime",onClick:this.likePost,children:Object(ne.jsx)(ot.a,{color:"primary"})}):Object(ne.jsx)(i.b,{to:"/login",children:Object(ne.jsx)(oe,{tip:"Like",children:Object(ne.jsx)(ot.a,{color:"primary",children:"/"})})})}}]),a}(n.Component),st={likePost:function(e){return function(t){j.a.put("https://projet7-oc-api.herokuapp.com/api/posts/like/".concat(e)).then((function(e){t({type:D,payload:e.data})})).catch((function(e){return console.log(e)}))}},unlikePost:function(e){return function(t){j.a.put("https://projet7-oc-api.herokuapp.com/api/posts/unlike/".concat(e)).then((function(e){t({type:E,payload:e.data})})).catch((function(e){return console.log(e)}))}}},it=Object(m.b)((function(e){return{user:e.user}}),st)(rt),ct=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={open:!1},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.deleteComment=function(){e.props.deleteComment(e.props.commentId),e.setState({open:!1})},e}return Object(Q.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(oe,{tip:"Supprimer le commentaire",onClick:this.handleOpen,btnClassName:e.deleteButton,children:Object(ne.jsx)(Ze.a,{color:"secondary"})}),Object(ne.jsxs)(ue.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm",children:[Object(ne.jsx)(he.a,{children:"Voulez-vous vraiment supprimer ce commentaire ?"}),Object(ne.jsxs)(Qe.a,{children:[Object(ne.jsx)(pe.a,{onClick:this.handleClose,color:"primary",children:"Annuler"}),Object(ne.jsx)(pe.a,{onClick:this.deleteComment,color:"secondary",children:"Supprimer"})]})]})]})}}]),a}(n.Component),lt=Object(m.b)(null,{deleteComment:function(e){return function(t){j.a.delete("https://projet7-oc-api.herokuapp.com/api/posts/delete-comment/".concat(e)).then((function(){t({type:M,payload:e})})).catch((function(e){return console.log(e)}))}}})(le()({deleteButton:{position:"absolute",right:"-50px",top:"-5px"}})(ct)),pt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){return Object(K.a)(this,a),t.apply(this,arguments)}return Object(Q.a)(a,[{key:"render",value:function(){Je.a.extend(Ke.a),Je.a.locale("fr");var e=this.props,t=e.comments,a=e.classes,o=e.user,r=o.authenticated,s=o.credentials,c=s.privilege,l=s.pseudo;return Object(ne.jsx)(Re.a,{container:!0,children:t.map((function(e,o){var s=e.body,p=e.createdAt,d=e.imageUrl,u=e.userPseudo,h=e.commentId,j=r&&(u===l||c)?Object(ne.jsx)(lt,{commentId:h}):null;return Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(Re.a,{item:!0,sm:12,children:Object(ne.jsxs)(Re.a,{container:!0,children:[Object(ne.jsx)(Re.a,{item:!0,sm:2,children:Object(ne.jsx)("img",{src:d,alt:"comment",className:a.commentImage})}),Object(ne.jsx)(Re.a,{item:!0,sm:9,children:Object(ne.jsxs)("div",{className:a.commentData,children:[Object(ne.jsx)(Pe.a,{variant:"h5",component:i.b,to:"/users/".concat(u),color:"primary",children:u}),Object(ne.jsx)(Pe.a,{variant:"body2",color:"textSecondary",children:Je()(p).format("DD MMMM YYYY, H:mm")}),j,Object(ne.jsx)("hr",{className:a.invisibleSeparator}),Object(ne.jsx)(Pe.a,{variant:"body1",children:s})]})})]})}),o!==t.length-1&&Object(ne.jsx)("hr",{className:a.visibleSeparator})]},p)}))})}}]),a}(n.Component),dt=Object(m.b)((function(e){return{post:e.data.post,user:e.user,comments:e.data.post.comments}}))(le()((function(e){return Object(f.a)(Object(f.a)({},e.spreadThis),{},{commentImage:{maxWidth:"100%",width:70,height:70,objectFit:"cover",borderRadius:"50%"},commentData:{marginLeft:20,position:"relative"}})}))(pt)),ut=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={body:"",errors:{}},e.handleChange=function(t){e.setState(Object(ie.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.submitComment(e.props.postId,{body:e.state.body}),e.setState({body:""})},e}return Object(Q.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.authenticated,n=this.state.errors;return a?Object(ne.jsxs)(Re.a,{item:!0,sm:12,style:{textAlign:"center",marginTop:"20px",width:"100%"},children:[Object(ne.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(ne.jsx)(de.a,{name:"body",type:"text",label:"Commenter ce post",erros:!!n.comment,helperText:n.comment,value:this.state.body,onChange:this.handleChange,fullWidth:!0,className:t.textfield}),Object(ne.jsx)(pe.a,{type:"submit",variant:"contained",color:"primary",className:t.button,children:"Envoyer"})]}),Object(ne.jsx)("hr",{className:t.visibleSeparator})]}):null}}]),a}(n.Component),ht=Object(m.b)((function(e){return{UI:e.UI,authenticated:e.user.authenticated}}),{submitComment:function(e,t){return function(a){j.a.post("https://projet7-oc-api.herokuapp.com/api/posts/".concat(e,"/comment"),t).then((function(e){console.log(e.data),a({type:W,payload:e.data}),a(Ie())})).catch((function(e){a({type:I,payload:e.response.data})}))}}})(le()((function(e){return{}}))(ut)),jt=a(94),mt=a.n(jt),bt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){return Object(K.a)(this,a),t.apply(this,arguments)}return Object(Q.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.post,n=a.postId,o=a.content,r=a.createdAt,s=a.likeCount,c=a.commentCount,l=a.imageUrl,p=a.userImage,d=a.userPseudo,u=a.comments;return e.UI.loading?Object(ne.jsx)("div",{className:t.spinnerDiv,children:Object(ne.jsx)(me.a,{size:200,thickness:2})}):Object(ne.jsxs)(Re.a,{container:!0,spacing:16,children:[Object(ne.jsx)(Re.a,{item:!0,sm:2,children:Object(ne.jsx)("img",{src:p,alt:"Profile",className:t.profileImage})}),Object(ne.jsxs)(Re.a,{item:!0,sm:10,children:[Object(ne.jsx)(Pe.a,{component:i.b,color:"primary",variant:"h5",tp:"/users/".concat(d),children:d}),Object(ne.jsx)("hr",{className:t.invisibleSeparator}),Object(ne.jsx)(Pe.a,{variant:"body2",color:"textSecondary",children:Je()(r).format("DD MMMM YYYY, H:mm")}),Object(ne.jsx)("hr",{className:t.invisibleSeparator}),Object(ne.jsx)(Pe.a,{variant:"body1",children:o}),Object(ne.jsx)("img",{src:l,className:t.imagePost,alt:"illustration post"}),Object(ne.jsx)(it,{postId:n}),Object(ne.jsxs)("span",{children:[" ",s," J'aime "]}),Object(ne.jsx)(oe,{tip:"comments",children:Object(ne.jsx)(mt.a,{color:"primary"})}),Object(ne.jsxs)("span",{children:[c," commentaire",+c>1?"s":""," "]})]}),Object(ne.jsx)("hr",{className:t.visibleSeparator}),Object(ne.jsx)(dt,{comments:u}),Object(ne.jsx)(ht,{postId:n})]})}}]),a}(n.Component),Ot=Object(m.b)((function(e){return{post:e.data.post,UI:e.UI}}))(le()((function(e){return Object(f.a)(Object(f.a)({},e.spreadThis),{},{profileImage:{width:70,height:70,borderRadius:"50%",objectFit:"cover"},dialogContent:{padding:20},closeButton:{position:"absolute",right:"3px"},spinnerDiv:{textAlign:"center",marginTop:50,marginBottom:50},imagePost:{margin:"17px auto",width:"100%"}})}))(bt)),xt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={open:!1,oldPath:"",newPath:""},e.handleOpen=function(){var t=window.location.pathname,a=e.props,n=a.pseudo,o=a.postId,r="/users/".concat(n,"/post/").concat(o);t===r&&(t="/users/".concat(n)),window.history.pushState(null,null,r),e.setState({open:!0,oldPath:t,newPath:r}),e.props.getPost(e.props.postId)},e.handleClose=function(){window.history.pushState(null,null,e.state.oldPath),e.setState({open:!1})},e}return Object(Q.a)(a,[{key:"componentDidMount",value:function(){this.props.openDialog&&this.handleOpen()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.commentCountFix;return Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(oe,{onClick:this.handleOpen,tip:"Commentaires",tipClassName:t.expandButton,children:Object(ne.jsx)(mt.a,{color:"primary"})}),Object(ne.jsxs)("span",{children:[" ",a," commentaire",+a>1?"s":""," "]}),Object(ne.jsxs)(ue.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm",children:[Object(ne.jsx)(oe,{tip:"Fermer",onClick:this.handleClose,tipClassName:t.closeButton,children:Object(ne.jsx)(fe.a,{})}),Object(ne.jsx)(je.a,{className:t.dialogContent,children:Object(ne.jsx)(Ot,{})})]})]})}}]),a}(n.Component),ft={getPost:function(e){return function(t){t({type:S}),j.a.get("https://projet7-oc-api.herokuapp.com/api/posts/post/".concat(e)).then((function(e){t({type:T,payload:e.data}),t({type:N})})).catch((function(e){return console.log(e)}))}}},gt=Object(m.b)((function(e){return{post:e.data.post,UI:e.UI}}),ft)(le()((function(e){return Object(f.a)(Object(f.a)({},e.spreadThis),{},{profileImage:{width:70,height:70,borderRadius:"50%",objectFit:"cover"},dialogContent:{padding:20},closeButton:{position:"absolute",right:"3px"},spinnerDiv:{textAlign:"center",marginTop:50,marginBottom:50},imagePost:{margin:"17px auto",width:"100%"}})}))(xt)),yt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){return Object(K.a)(this,a),t.apply(this,arguments)}return Object(Q.a)(a,[{key:"render",value:function(){Je.a.extend(Ke.a),Je.a.locale("fr");var e=this.props,t=e.classes,a=e.post,n=a.content,o=a.createdAt,r=a.imageUrl,s=a.userImage,i=a.userPseudo,c=a.postId,l=a.likeCount,p=a.commentCount,d=e.user,u=d.authenticated,h=d.credentials,j=h.pseudo,m=h.privilege,b=u&&(i===j||m)?Object(ne.jsx)(et,{postId:c}):null;return Object(ne.jsxs)(_e.a,{className:t.card,type:"post",children:[Object(ne.jsxs)("div",{className:"image-wrapper",children:[Object(ne.jsx)("img",{src:s,alt:"profile",className:"profile-image"}),Object(ne.jsx)(Pe.a,{variant:"subtitle1",component:ee.a,to:"/users/".concat(i),color:"primary",className:t.pseudoContainer,children:i})]}),Object(ne.jsxs)(Le.a,{className:t.content,children:[b,Object(ne.jsx)(Pe.a,{variant:"body2",color:"textSecondary",children:Je()(o,"").fromNow()}),Object(ne.jsx)("img",{src:r,className:t.imagePost,alt:"illustration post"}),Object(ne.jsxs)("p",{children:[" ",n," "]}),Object(ne.jsxs)("div",{className:t.interaction,children:[Object(ne.jsxs)("div",{className:"bloc",children:[Object(ne.jsx)(it,{postId:c,className:t.button}),Object(ne.jsxs)("span",{children:[l," J'aime "]})]}),Object(ne.jsx)("div",{className:"bloc",children:Object(ne.jsx)(gt,{postId:c,pseudo:j,commentCountFix:p,openDialog:this.props.openDialog})})]})]})]})}}]),a}(n.Component),vt=Object(m.b)((function(e){return{user:e.user}}))(le()({card:{position:"relative",display:"flex",marginBottom:20,margin:"0 10px","& .image-wrapper":{maxWidth:"70px",textAlign:"center",position:"relative",padding:"10px",display:"flex",flexDirection:"column",alignItems:"center"},"& .content":{},"& .profile-image":{width:"60px",height:"60px",objectFit:"cover",borderRadius:"50%"}},image:{minWidth:200},content:{padding:25,objectFit:"cover",flexGrow:1,display:"flex",flexDirection:"column"},imagePost:{margin:"10px auto",width:"100%",maxWidth:"450px"},pseudoContainer:{width:"90px",whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis"},interaction:{display:"flex",flexDirection:"row",flexWrap:"wrap","& .bloc":{margin:"0 15px"}}})(yt)),Ct=a(112),It=a(146),St=a.n(It),kt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={bio:"",job:"",team:"",openEdit:!1,openConfirmation:!1},e.mapUserDetailsToState=function(t){e.setState({bio:t.bio?t.bio:"",job:t.job?t.job:"",team:t.team?t.team:""})},e.handleOpenEdit=function(){e.setState({openEdit:!0}),e.mapUserDetailsToState(e.props.credentials)},e.handleOpenConfirmation=function(){e.setState({openConfirmation:!0}),e.mapUserDetailsToState(e.props.credentials)},e.handleCloseEdit=function(){e.setState({openEdit:!1})},e.handleCloseConfirmation=function(){e.setState({openConfirmation:!1})},e.componentDidMount=function(){var t=e.props.credentials;e.mapUserDetailsToState(t)},e.handleChange=function(t){e.setState(Object(ie.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t={bio:e.state.bio,job:e.state.job,team:e.state.team};e.props.editUserDetails(t),e.handleCloseEdit()},e.handleDelete=function(){e.props.deleteUser(),e.props.logoutUser()},e}return Object(Q.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(oe,{tip:"Modifier les informations",onClick:this.handleOpenEdit,btnClassName:e.button,children:Object(ne.jsx)(St.a,{color:"primary"})}),Object(ne.jsxs)(ue.a,{open:this.state.openEdit,onClose:this.handleCloseEdit,fullWidth:!0,maxWidth:"sm",children:[Object(ne.jsx)(he.a,{children:" Modifier vos informations "}),Object(ne.jsx)(je.a,{children:Object(ne.jsxs)("form",{children:[Object(ne.jsx)(de.a,{name:"bio",type:"text",label:"Bio",multiline:!0,rows:"3",placeholder:"Une courte pr\xe9sentation de vous-m\xeame \ud83d\ude42",className:e.textField,value:this.state.bio,onChange:this.handleChange,fullWidth:!0,children:" "}),Object(ne.jsx)(de.a,{name:"job",type:"text",label:"Job",placeholder:"Votre emploi au sein de Groupomania \ud83d\udc68\u200d\ud83d\udcbb",className:e.textField,value:this.state.job,onChange:this.handleChange,fullWidth:!0,children:" "}),Object(ne.jsx)(de.a,{name:"team",type:"text",label:"Team",placeholder:"Votre \xe9quipe \ud83c\udfd7",className:e.textField,value:this.state.team,onChange:this.handleChange,fullWidth:!0,children:" "})]})}),Object(ne.jsxs)(Qe.a,{children:[Object(ne.jsx)(pe.a,{onClick:this.handleOpenConfirmation,color:"secondary",children:"Supprimer ce profil"}),Object(ne.jsx)(pe.a,{onClick:this.handleCloseEdit,color:"primary",children:"Annuler"}),Object(ne.jsx)(pe.a,{onClick:this.handleSubmit,color:"primary",children:"Enregistrer"})]})]}),Object(ne.jsxs)(ue.a,{open:this.state.openConfirmation,children:[Object(ne.jsxs)(he.a,{children:[" ","Souhaitez-vous vraiment supprimer votre profil ?"," "]}),Object(ne.jsxs)(Qe.a,{children:[Object(ne.jsx)(pe.a,{onClick:this.handleDelete,color:"secondary",children:"Oui"}),Object(ne.jsx)(pe.a,{onClick:this.handleCloseConfirmation,color:"primary",children:"Non"})]})]})]})}}]),a}(n.Component),wt=Object(m.b)((function(e){return{credentials:e.user.credentials}}),{editUserDetails:function(e){return function(t){t({type:C}),j.a.post("https://projet7-oc-api.herokuapp.com/api/user/editProfile",e).then((function(){t(q())})).catch((function(e){console.log(e)}))}},logoutUser:V,deleteUser:function(){return function(e){j.a.delete("https://projet7-oc-api.herokuapp.com/api/user/delete").then((function(){console.log("Votre profil a bien \xe9t\xe9 supprim\xe9 !")})).catch((function(e){console.log(e)}))}}})(le()((function(e){return Object(f.a)(Object(f.a)({},e.spreadThis),{},{button:{float:"right"}})}))(kt)),Nt=a(98),Pt=a.n(Nt),Ut=a(97),Tt=a.n(Ut),Ft=a(99),Dt=a.n(Ft),Et=a(100),At=a.n(Et),Bt=a(96),Wt=a.n(Bt),Mt=a(95),Rt=a.n(Mt),zt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleImageChange=function(t){var a=t.target.files[0],n=new FormData;n.append("image",a,"profil"),n.append("pathToSave","public/images/users/"),e.props.uploadImage(n)},e.handleEditPicture=function(){document.getElementById("imageInput").click()},e.handleLogout=function(){e.props.logoutUser()},e}return Object(Q.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.user,o=a.credentials,r=o.pseudo,s=o.privilege,c=o.createdAt,l=o.team,p=o.job,d=o.bio,u=o.imageUrl,h=a.loading,j=a.authenticated;return h?Object(ne.jsx)(ze,{}):j?Object(ne.jsx)(Ct.a,{className:t.paper,children:Object(ne.jsxs)("div",{className:t.profile,children:[Object(ne.jsxs)("div",{className:"image-wrapper",onClick:this.handleEditPicture,children:[Object(ne.jsx)("img",{src:u,alt:"profile",className:"profile-image"}),Object(ne.jsx)(Rt.a,{className:"button"}),Object(ne.jsx)("input",{type:"file",id:"imageInput",onChange:this.handleImageChange,hidden:"hidden"})]}),Object(ne.jsx)("hr",{}),Object(ne.jsxs)("div",{className:"profile-details",children:[Object(ne.jsxs)(Ne.a,{component:i.b,to:"/users/".concat(r),color:"primary",variant:"h5",children:["@",r]}),s?Object(ne.jsx)(Wt.a,{color:"primary",className:"adminicon"}):"",Object(ne.jsx)("hr",{}),d&&Object(ne.jsx)(Pe.a,{variant:"body2",children:d}),Object(ne.jsx)("hr",{}),p&&Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(Tt.a,{color:"primary"})," ",Object(ne.jsxs)("span",{children:[" ",p," "]}),Object(ne.jsx)("hr",{})]}),l&&Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(Pt.a,{color:"primary"})," ",Object(ne.jsxs)("span",{children:[" ",l," "]}),Object(ne.jsx)("hr",{})]}),Object(ne.jsx)(Dt.a,{color:"primary"})," ",Object(ne.jsxs)("span",{children:["Inscrit depuis le ",Je()(c).format("DD/MM/YYYY")]})]}),Object(ne.jsx)(oe,{tip:"Se d\xe9connecter",onClick:this.handleLogout,btnClassName:"button",children:Object(ne.jsx)(At.a,{color:"primary"})}),Object(ne.jsx)(wt,{})]})}):Object(ne.jsx)(Ct.a,{className:t.paper,children:Object(ne.jsxs)(Pe.a,{variant:"body2",align:"center",children:["Aucun profil correspondant, veuillez vous identifier \xe0 nouveau",Object(ne.jsxs)("div",{className:t.buttons,children:[Object(ne.jsx)(pe.a,{variant:"contained",color:"primary",component:i.b,to:"/login",children:"S'identifier"}),Object(ne.jsx)(pe.a,{variant:"contained",color:"secondary",component:i.b,to:"/signup",children:"S'inscrire"})]})]})})}}]),a}(n.Component),_t={logoutUser:V,uploadImage:J},Lt=Object(m.b)((function(e){return{user:e.user}}),_t)(le()((function(e){return{paper:{padding:10,marginBottom:"20px"},profile:{margin:"0 10px","& .image-wrapper":{position:"relative",width:"15vw",height:"15vw",minWidth:"100px",minHeight:"100px",borderRadius:"50%",margin:"auto","& svg":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"3rem",color:"white !important",cursor:"pointer",visibility:"hidden"},"&:hover .profile-image":{opacity:.7},"&:hover svg":{opacity:.7,visibility:"visible"}},"& .profile-image":{objectFit:"cover",margin:"auto",maxWidth:"100%",width:"15vw",height:"15vw",borderRadius:"50%",minWidth:"100px",minHeight:"100px",transition:"all .2s linear",cursor:"pointer"},"& .profile-details":{textAlign:"center","& span , svg":{verticalAlign:"middle"},"& a ":{color:e.palette.primary.main}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}},buttons:{textAlign:"center","& a":{margin:"20px 10px"}},"& .adminicon":{margin:"0 5px"}}}}))(zt)),Yt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){return Object(K.a)(this,a),t.apply(this,arguments)}return Object(Q.a)(a,[{key:"componentDidMount",value:function(){this.props.getPosts()}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.posts,n=t.loading;document.querySelector("html").style.background="",document.querySelector("body").style.background="transparent";var o=a.map((function(e){return Object(ne.jsx)(vt,{post:e},e.postId)}));return Object(ne.jsxs)(Re.a,{container:!0,spacing:16,children:[Object(ne.jsx)(Re.a,{item:!0,sm:3,xs:12,children:Object(ne.jsx)(Lt,{})}),Object(ne.jsxs)(Re.a,{item:!0,sm:9,xs:12,children:[Object(ne.jsx)(He,{}),Object(ne.jsx)(Ve.a,{dataLength:a.length,next:function(){return e.props.getMorePosts(e.props.data.posts.length)},hasMore:!0,scrollThreshold:"100px",children:o}),n&&Object(ne.jsx)(ze,{})]})]})}}]),a}(n.Component),Ht=Object(m.b)((function(e){return{data:e.data}}),{getPosts:function(e){return function(t){t({type:w}),j.a.get("https://projet7-oc-api.herokuapp.com/api/posts",{params:{offset:e}}).then((function(e){t({type:P,payload:e.data})})).catch((function(e){t({type:P,payload:[]})}))}},getMorePosts:function(e){return function(t){t({type:w}),j.a.get("https://projet7-oc-api.herokuapp.com/api/posts",{params:{offset:e}}).then((function(e){t({type:F,payload:e.data})})).catch((function(e){t({type:F,payload:[]})}))}}})(Yt),Vt=a.p+"static/media/icon-above-font.6c50863d.png",qt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;return Object(K.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var a={mail:e.state.email,password:e.state.password};e.props.loginUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(ie.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",errors:{}},e}return Object(Q.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,n=this.state.errors,o=document.querySelector("html");return o.style.background='url("https://projet7-oc-api.herokuapp.com/public/images/abstract-blur-hotel-interior-compressed.jpg")',o.style.backgroundPosition="center",o.style.backgroundSize="cover",document.querySelector("body").style.background="transparent",Object(ne.jsx)(Re.a,{container:!0,justify:"center",className:t.form,children:Object(ne.jsxs)(Re.a,{sm:"5",item:!0,className:t.formpart,children:[Object(ne.jsx)("img",{src:Vt,alt:"groupomania",className:t.image}),Object(ne.jsx)(Pe.a,{variant:"h2",className:t.pageTitle,children:"S'identifier"}),Object(ne.jsxs)("form",{noValidate:!0,onSubmit:this.handleSubmit,children:[Object(ne.jsx)(de.a,{id:"email",name:"email",type:"email",label:"Mail",className:t.textField,helperText:n.email,error:!!n.email,value:this.state.email,onChange:this.handleChange,fullWidth:!0}),Object(ne.jsx)(de.a,{id:"password",name:"password",type:"password",label:"Mot de passe",className:t.textField,helperText:n.password,error:!!n.password,value:this.state.password,onChange:this.handleChange,fullWidth:!0}),n.general&&Object(ne.jsx)(Pe.a,{variant:"body2",className:t.customError,children:n.general}),Object(ne.jsxs)(pe.a,{type:"submit",variant:"contained",color:"primary",className:"button",disabled:a,children:["S'identifier",a&&Object(ne.jsx)(me.a,{size:30,className:t.progress})]}),Object(ne.jsx)("br",{}),Object(ne.jsxs)("small",{children:["Pas de compte encore ? Inscrivez-vous"," ",Object(ne.jsx)(i.b,{to:"/signup",children:" ici "})]})]})]})})}}]),a}(n.Component),Jt={loginUser:function(e,t){return function(a){a({type:S}),j.a.post("https://projet7-oc-api.herokuapp.com/api/user/login",e).then((function(e){G(e.data.token),a(q()),a({type:k}),t.push("/")})).catch((function(e){a({type:I,payload:e.response.data})}))}}},Gt=Object(m.b)((function(e){return{user:e.user,UI:e.UI}}),Jt)(le()((function(e){return Object(f.a)({},e.spreadThis)}))(qt)),Kt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;return Object(K.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault(),e.setState({loading:!0});var a={mail:e.state.email,password:e.state.password,confirmPassword:e.state.confirmPassword,handle:e.state.handle};e.props.signupUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(ie.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",confirmPassword:"",handle:"",errors:{}},e}return Object(Q.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,n=this.state.errors,o=document.querySelector("html");return o.style.background='url("https://projet7-oc-api.herokuapp.com/public/images/abstract-blur-hotel-interior-compressed.jpg")',o.style.backgroundPosition="center",o.style.backgroundSize="cover",document.querySelector("body").style.background="transparent",Object(ne.jsx)(Re.a,{container:!0,justify:"center",className:t.form,children:Object(ne.jsxs)(Re.a,{sm:"5",item:!0,className:t.formpart,children:[Object(ne.jsx)("img",{src:Vt,alt:"groupomania",className:t.image}),Object(ne.jsx)(Pe.a,{variant:"h2",className:t.pageTitle,children:"S'inscrire"}),Object(ne.jsxs)("form",{noValidate:!0,onSubmit:this.handleSubmit,children:[Object(ne.jsx)(de.a,{id:"email",name:"email",type:"email",label:"Mail",className:t.textField,helperText:n.email,error:!!n.email,value:this.state.email,onChange:this.handleChange,fullWidth:!0}),Object(ne.jsx)(de.a,{id:"password",name:"password",type:"password",label:"Mot de passe",className:t.textField,helperText:n.password,error:!!n.password,value:this.state.password,onChange:this.handleChange,fullWidth:!0}),Object(ne.jsx)(de.a,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirmez le mot de passe",className:t.textField,helperText:n.confirmPassword,error:!!n.confirmPassword,value:this.state.confirmPassword,onChange:this.handleChange,fullWidth:!0}),Object(ne.jsx)(de.a,{id:"handle",name:"handle",type:"text",label:"Pseudo",className:t.textField,helperText:n.handle,error:!!n.handle,value:this.state.handle,onChange:this.handleChange,fullWidth:!0}),n.general&&Object(ne.jsx)(Pe.a,{variant:"body2",className:t.customError,children:n.general}),Object(ne.jsxs)(pe.a,{type:"submit",variant:"contained",color:"primary",className:"button",disabled:a,children:["S'inscrire",a&&Object(ne.jsx)(me.a,{size:30,className:t.progress})]}),Object(ne.jsx)("br",{}),Object(ne.jsxs)("small",{children:["Vous avez d\xe9j\xe0 un compte ? Identifiez-vous"," ",Object(ne.jsx)(i.b,{to:"/login",children:" ici "})]})]})]})})}}]),a}(n.Component),Qt=Object(m.b)((function(e){return{user:e.user,UI:e.UI}}),{signupUser:function(e,t){return function(a){a({type:S}),j.a.post("https://projet7-oc-api.herokuapp.com/api/user/signup",e).then((function(e){G(e.data.token),a(q()),a({type:k}),t.push("/")})).catch((function(e){a({type:I,payload:e.response.data})}))}}})(le()((function(e){return Object(f.a)({},e.spreadThis)}))(Kt)),Xt=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={openConfirmation:!1},e.handleOpenConfirmation=function(){e.setState({openConfirmation:!0})},e.handleCloseConfirmation=function(){e.setState({openConfirmation:!1})},e.handleDelete=function(t){var a=t.currentTarget.getAttribute("pseudo");e.props.deleteOtherUser(a),window.location.assign("/")},e.handleImageChange=function(t){var a=t.target.files[0],n=new FormData;n.append("image",a,"profil"),n.append("pathToSave","public/images/users/"),e.props.uploadImage(n)},e.handleEditPicture=function(){document.getElementById("imageInput").click()},e.handleLogout=function(){e.props.logoutUser()},e}return Object(Q.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.user,o=a.loading,r=a.credentials,s=e.profile,c=s.pseudo,l=s.privilege,p=s.createdAt,d=s.team,u=s.job,h=s.bio,j=s.imageUrl;return o?Object(ne.jsx)(ze,{}):Object(ne.jsx)(Ct.a,{className:t.paper,children:Object(ne.jsxs)("div",{className:t.profile,children:[Object(ne.jsxs)("div",{className:"image-wrapper",onClick:c===r.pseudo?this.handleEditPicture:"",children:[Object(ne.jsx)("img",{src:j,alt:"profile",className:"profile-image"}),c===r.pseudo&&Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(Rt.a,{className:"button"}),Object(ne.jsx)("input",{type:"file",id:"imageInput",onChange:this.handleImageChange,hidden:"hidden"})]})]}),Object(ne.jsx)("hr",{}),Object(ne.jsxs)("div",{className:"profile-details",children:[Object(ne.jsxs)(Ne.a,{component:i.b,to:"/users/".concat(c),color:"primary",variant:"h5",children:["@",c]}),l?Object(ne.jsx)(Wt.a,{color:"primary",className:"adminicon"}):"",Object(ne.jsx)("hr",{}),h&&Object(ne.jsx)(Pe.a,{variant:"body2",children:h}),Object(ne.jsx)("hr",{}),u&&Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(Tt.a,{color:"primary"})," ",Object(ne.jsxs)("span",{children:[" ",u," "]}),Object(ne.jsx)("hr",{})]}),d&&Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(Pt.a,{color:"primary"})," ",Object(ne.jsxs)("span",{children:[" ",d," "]}),Object(ne.jsx)("hr",{})]}),Object(ne.jsx)(Dt.a,{color:"primary"})," ",Object(ne.jsxs)("span",{children:["Inscrit depuis le ",Je()(p).format("DD/MM/YYYY")]})]}),c===r.pseudo?Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)(oe,{tip:"Se d\xe9connecter",onClick:this.handleLogout,btnClassName:"button",children:Object(ne.jsx)(At.a,{color:"primary"})}),Object(ne.jsx)(wt,{})]}):1===r.privilege&&Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsx)("div",{className:t.suppression,children:Object(ne.jsx)(pe.a,{onClick:this.handleOpenConfirmation,color:"secondary",children:"Supprimer ce profil"})}),Object(ne.jsxs)(ue.a,{open:this.state.openConfirmation,children:[Object(ne.jsxs)(he.a,{children:[" ","Souhaitez-vous vraiment supprimer ce profil ?"," "]}),Object(ne.jsxs)(Qe.a,{children:[Object(ne.jsx)(pe.a,{onClick:this.handleDelete,color:"secondary",pseudo:c,children:"Oui"}),Object(ne.jsx)(pe.a,{onClick:this.handleCloseConfirmation,color:"primary",children:"Non"})]})]})]})]})})}}]),a}(n.Component),Zt=Object(m.b)((function(e){return{user:e.user}}),{logoutUser:V,deleteOtherUser:function(e){return function(t){j.a.delete("https://projet7-oc-api.herokuapp.com/api/user/delete/".concat(e)).then((function(){console.log("Ce profil a bien \xe9t\xe9 supprim\xe9 !")})).catch((function(e){console.log(e)}))}}})(le()((function(e){return{paper:{padding:10,marginBottom:"20px"},suppression:{display:"flex",justifyContent:"center"},profile:{margin:"0 10px","& .image-wrapper":{position:"relative",width:"15vw",height:"15vw",minWidth:"100px",minHeight:"100px",borderRadius:"50%",margin:"auto","& svg":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"3rem",color:"white !important",cursor:"pointer",visibility:"hidden"},"&:hover .profile-image":{opacity:.7},"&:hover svg":{opacity:.7,visibility:"visible"}},"& .profile-image":{objectFit:"cover",margin:"auto",maxWidth:"100%",width:"15vw",height:"15vw",borderRadius:"50%",minWidth:"100px",minHeight:"100px",transition:"all .2s linear",cursor:"pointer"},"& .profile-details":{textAlign:"center","& span , svg":{verticalAlign:"middle"},"& a ":{color:e.palette.primary.main}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}},buttons:{textAlign:"center","& a":{margin:"20px 10px"}},"& .adminicon":{margin:"0 5px"}}}}))(Xt)),$t=function(e){Object(X.a)(a,e);var t=Object(Z.a)(a);function a(){var e;Object(K.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={profile:null,postIdParam:null},e}return Object(Q.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.pseudo,a=this.props.match.params.postId;this.setState({postIdParam:a}),this.props.getUserPosts(t),j.a.get("https://projet7-oc-api.herokuapp.com/api/user/informations/".concat(t)).then((function(t){e.setState({profile:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.props.data,t=e.posts,a=e.loading,o=this.state.postIdParam,r=a?Object(ne.jsx)(ze,{}):0===t.length?Object(ne.jsxs)(n.Fragment,{children:[Object(ne.jsxs)("p",{style:{fontSize:"20px",textAlign:"center"},children:[" ","Cet utilisateur n'a encore rien post\xe9 \ud83e\udd37\ud83c\udffc\u200d\u2642\ufe0f"," "]}),Object(ne.jsx)("div",{className:"button-container",style:{width:"100%",display:"flex",justifyContent:"center"},children:Object(ne.jsx)(pe.a,{variant:"contained",color:"primary",component:ee.a,to:"/signup",children:"Retour \xe0 la page d'accueil"})})]}):o?t.map((function(e,t){return e.postId!==+o?Object(ne.jsx)(vt,{post:e},e.postId):Object(ne.jsx)(vt,{post:e,openDialog:!0},e.postId)})):t.map((function(e){return Object(ne.jsx)(vt,{post:e},e.postId)}));return Object(ne.jsxs)(Re.a,{container:!0,spacing:16,children:[Object(ne.jsx)(Re.a,{item:!0,sm:3,xs:12,children:null===this.state.profile?Object(ne.jsx)("p",{children:" Chargement du profil... "}):Object(ne.jsx)(Zt,{profile:this.state.profile})}),Object(ne.jsx)(Re.a,{item:!0,sm:9,xs:12,children:r})]})}}]),a}(n.Component),ea=Object(m.b)((function(e){return{data:e.data}}),{getUserPosts:function(e){return function(t){t({type:w}),j.a.get("https://projet7-oc-api.herokuapp.com/api/user/posts/".concat(e)).then((function(e){t({type:U,payload:e.data})})).catch((function(){t({type:U,payload:null})}))}}})($t),ta=Object(d.a)({palette:{primary:{light:"#33CD9C",main:"#00BCD4",dark:"#008394",contrastText:"#FFFFFF"},secondary:{light:"#FF6333",main:"#FF3D00",dark:"#B22A00",contrastText:"#FFFFFF "}},spreadThis:{typography:{useNextVariants:!0},form:{textAlign:"center",backgroundColor:"transparent","& .button":{margin:"25px !important",padding:"5px 15px !important",position:"relative"}},formpart:{backgroundColor:"white",padding:"30px 40px",borderRadius:"20px",boxShadow:"0 0 15px 3px rgba(0,0,0, .5)"},image:{margin:"20px auto 20px auto",width:"200px"},groupomaniaBrand:{width:"200px"},imagePost:{width:"100%",height:"100%",maxWidth:"450px"},pageTitle:{margin:"10px auto 10px auto"},textField:{margin:"10px auto 10px auto"},customError:{color:"red",fontSize:"0.8rem",marginTop:10},progress:{position:"absolute"},invisibleSeparator:{border:"none",margin:4},visibleSeparator:{width:"100%",borderBottom:"1px solid rgba(0,0,0,.1)",maginBottom:20}}}),aa=localStorage.getItem("FBIdtoken")?localStorage.getItem("FBIdtoken").split(" ")[1]:void 0;if(aa)if(1e3*Object(u.a)(aa).exp<Date.now())window.location.href="/login",H.dispatch(V());else{H.dispatch({type:g});var na="Bearer ".concat(aa);j.a.defaults.headers.common.Authorization=na,H.dispatch(q())}var oa=function(){return Object(ne.jsx)(p.a,{theme:ta,children:Object(ne.jsx)(m.a,{store:H,children:Object(ne.jsxs)(i.a,{children:[Object(ne.jsx)(De,{}),Object(ne.jsx)("div",{className:"container",children:Object(ne.jsxs)(c.Switch,{children:[Object(ne.jsx)(Be,{exact:!0,path:"/login",component:Gt}),Object(ne.jsx)(Be,{exact:!0,path:"/signup",component:Qt}),Object(ne.jsx)(Me,{exact:!0,path:"/",component:Ht}),Object(ne.jsx)(Me,{exact:!0,path:"/users/:pseudo",component:ea}),Object(ne.jsx)(Me,{exact:!0,path:"/users/:pseudo/post/:postId",component:ea}),Object(ne.jsx)(Me,{path:"*",component:ea})]})})]})})})},ra=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,277)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),o(e),r(e),s(e)}))};s.a.render(Object(ne.jsx)(o.a.StrictMode,{children:Object(ne.jsx)(oa,{})}),document.getElementById("root")),ra()}},[[227,1,2]]]);
//# sourceMappingURL=main.bd0562ee.chunk.js.map