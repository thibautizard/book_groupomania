(this.webpackJsonpgroupomania=this.webpackJsonpgroupomania||[]).push([[0],{180:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(0),r=a.n(o),s=a(16),i=a.n(s),c=a(21),l=a(22),p=(a(180),a(154)),d=a.n(p),u=a(115),h=a.n(u),j=a(142),m=a(18),b=a.n(m),O=a(10),x=a(55),f=a(144),g=a(68),y=a(5),v="SET_AUTHENTICATED",C="SET_UNAUTHENTICATED",S="SET_USER",I="LOADING_USER",k="SET_ERRORS",w="LOADING_UI",N="CLEAR_ERRORS",P="LOADING_DATA",U="STOP_LOADING_UI",T="SET_POSTS",F="SET_POSTS_USER",E="SET_POST",D="SET_MORE_POSTS",A="LIKE_POST",B="UNLIKE_POST",W="DELETE_POST",_="CREATE_POST",M="SUBMIT_COMMENT",R="DELETE_COMMENT",z={authenticated:!1,loading:!1,credentials:{},likes:[],notifications:[]},L={posts:[],post:{},loading:!1},Y={loading:!1,error:null},V=[f.a],H=Object(x.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(y.a)(Object(y.a)({},e),{},{authenticated:!0,loading:!1});case C:return z;case S:return{authenticated:!0,loading:!1,credentials:t.payload.user,likes:t.payload.likes};case I:return Object(y.a)(Object(y.a)({},e),{},{loading:!0});case A:return Object(y.a)(Object(y.a)({},e),{},{likes:[].concat(Object(g.a)(e.likes),[{userHandle:e.credentials.handle,postId:t.payload.postId}])});case B:return Object(y.a)(Object(y.a)({},e),{},{likes:e.likes.filter((function(e){return e.postId!==t.payload.postId}))});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(y.a)(Object(y.a)({},e),{},{loading:!0});case T:return Object(y.a)(Object(y.a)({},e),{},{posts:t.payload,loading:!1});case D:return Object(y.a)(Object(y.a)({},e),{},{posts:[].concat(Object(g.a)(e.posts),Object(g.a)(t.payload)),loading:!1});case F:return Object(y.a)(Object(y.a)({},e),{},{posts:t.payload,loading:!1});case E:return Object(y.a)(Object(y.a)({},e),{},{post:t.payload,loading:!1});case A:var a=e.posts.findIndex((function(e){return e.postId===t.payload.postId}));return e.posts[a]=t.payload,e.post.postId===t.payload.postId&&(e.post=t.payload),Object(y.a)({},e);case B:var n=e.posts.findIndex((function(e){return e.postId===t.payload.postId}));return e.posts[n]=t.payload,e.post.postId===t.payload.postId&&(e.post=t.payload),Object(y.a)({},e);case W:var o=e.posts.findIndex((function(e){return e.postId===t.payload}));return e.posts.splice(o,1),Object(y.a)({},e);case _:return Object(y.a)(Object(y.a)({},e),{},{posts:t.payload});case M:var r=e.posts.findIndex((function(e){return e.postId===t.payload.post.postId}));return e.posts[r]=t.payload.post,Object(y.a)(Object(y.a)({},e),{},{post:Object(y.a)(Object(y.a)({},t.payload.post),{},{comments:[t.payload.comment].concat(Object(g.a)(e.post.comments))})});case R:var s=e.post.comments.findIndex((function(e){return e.commentId===t.payload}));return e.post.comments.splice(s,1),Object(y.a)(Object(y.a)({},e),{},{post:Object(y.a)(Object(y.a)({},e.post),{},{comments:e.post.comments})});default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(y.a)(Object(y.a)({},e),{},{loading:!1,errors:t.payload});case N:return Object(y.a)(Object(y.a)({},e),{},{loading:!1,errors:null});case w:return Object(y.a)(Object(y.a)({},e),{},{loading:!0});case U:return Object(y.a)(Object(y.a)({},e),{},{loading:!1});default:return e}}}),q=Object(x.e)(H,{},Object(x.d)(x.a.apply(void 0,V),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),J=function(){return function(e){localStorage.removeItem("FBIdtoken"),b.a.default.headers&&delete b.a.default.headers.common.Authorization,e({type:C})}},G=function(){return function(e){e({type:I}),b.a.get("https://projet7-oc-api.herokuapp.com/api/user/user").then((function(t){e({type:S,payload:t.data})})).catch((function(e){console.log(e)}))}},X=function(e){return function(t){t({type:I}),b.a.post("https://projet7-oc-api.herokuapp.com/api/user/uploadImage",e).then((function(){t(G())})).catch((function(e){console.log(e)}))}},K=function(e){var t="Bearer ".concat(e);localStorage.setItem("FBIdtoken",t),b.a.defaults.headers.common.Authorization=t},Q=a(12),Z=a(13),$=a(15),ee=a(14),te=a(63),ae=a.n(te),ne=a(276),oe=a(261),re=function(e){var t=e.children,a=e.onClick,o=e.tip,r=e.btnClassName,s=e.tipClassName;return Object(n.jsx)(ne.a,{title:o,className:s,placement:"top",children:Object(n.jsx)(oe.a,{onClick:a,className:r,children:t})})},se=a(66),ie=a.n(se),ce=a(92),le=a(31),pe=a(17),de=a.n(pe),ue=a(265),he=a(275),je=a(262),me=a(263),be=a(264),Oe=a(266),xe=a(149),fe=a.n(xe),ge=a(74),ye=a.n(ge),ve=a(95),Ce=a.n(ve),Se=function(e){return function(t){t({type:w}),b.a.post("https://projet7-oc-api.herokuapp.com/api/posts/createPost",e).then((function(e){t({type:_,payload:e.data}),t(ke())})).catch((function(e){t({type:k,payload:e.response.data})}))}},Ie=function(e){return function(t){return b.a.post("https://projet7-oc-api.herokuapp.com/api/posts/uploadImagePost",e).then((function(e){return e.data.imageUrl})).catch((function(e){return console.log(e)}))}},ke=function(){return function(e){e({type:N})}},we=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={open:!1,body:"",errors:{},imageUrl:""},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){ke(),e.setState({open:!1,errors:{},imageUrl:""})},e.handleChange=function(t){e.setState(Object(le.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createPost({body:e.state.body,imageUrl:e.state.imageUrl})},e.handleEditPicture=function(){document.getElementById("imagePostInput").click()},e.handleImageChange=function(){var t=Object(ce.a)(ie.a.mark((function t(a){var n,o,r;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.files[0],(o=new FormData).append("image",n,"post"),o.append("pathToSave","public/images/posts/"),t.next=6,e.props.uploadImagePost(o);case 6:r=t.sent,e.setState({imageUrl:r});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(Z.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors}),e.UI.errors||e.UI.loading||(this.setState({body:"",open:!1,errors:{}}),this.handleClose())}},{key:"render",value:function(){var e=this.state,t=e.errors,a=e.imageUrl,r=this.props,s=r.classes,i=r.UI.loading;return Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(re,{onClick:this.handleOpen,tip:"Cr\xe9er un post",children:Object(n.jsx)(fe.a,{color:"white"})}),Object(n.jsxs)(je.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm",children:[Object(n.jsx)(re,{tip:"Fermer",onClick:this.handleClose,tipClassName:s.closeButton,children:Object(n.jsx)(ye.a,{})}),Object(n.jsx)(me.a,{children:" Cr\xe9er un nouveau post "}),Object(n.jsx)(be.a,{children:Object(n.jsxs)("form",{onSubmit:this.handleSubmit,className:s.form,children:[a?Object(n.jsx)("img",{src:a,className:s.imagePost,alt:"illustration post"}):Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)("input",{type:"file",id:"imagePostInput",onChange:this.handleImageChange,hidden:"hidden"}),Object(n.jsx)(re,{tip:"Ajouter un gif",onClick:this.handleEditPicture,children:Object(n.jsx)(Ce.a,{color:"primary",style:{fontSize:"80px"}})})]}),Object(n.jsx)(he.a,{name:"body",type:"text",label:"Mon post",multiline:!0,rows:"3",placeholder:"\xc9crire ici un commentaire",error:!!t.body,helperText:t.body,className:s.textField,onChange:this.handleChange,fullWidth:!0}),Object(n.jsxs)(ue.a,{type:"submit",variant:"contained",color:"primary",className:s.submitButton,disabled:i,children:["Poster",i&&Object(n.jsx)(Oe.a,{size:30,className:s.progressSpinner})]})]})})]})]})}}]),a}(o.Component),Ne=(Object(O.b)((function(e){return{UI:e.UI,data:e.data}}),{createPost:Se,uploadImagePost:Ie})(de()((function(e){return Object(y.a)(Object(y.a)({},e.spreadThis),{},{submitButton:{position:"relative",float:"right",marginTop:10},progressSpinner:{position:"absolute"},closeButton:{position:"absolute",left:"88%",top:"0%"},form:{display:"flex",flexDirection:"column",alignItems:"center"},addPhoto:{width:"120px",height:"120px"}})}))(we)),a(155),a(267)),Pe=a(268),Ue=(a(277),a(269)),Te=(a(278),a(158)),Fe=a(270),Ee=(a(150),a.p+"static/media/groupomania-brand.e6dc3d26.png");Object(Ne.a)((function(){return{header:{paddingLeft:"20px"},menuButton:{size:"18px",marginLeft:"38px"},toolbar:{display:"flex",justifyContent:"space-between"},drawerContainer:{padding:"20px 30px"}}}));var De=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object(Z.a)(a,[{key:"render",value:function(){this.props.authenticated;return Object(n.jsxs)(Fe.a,{position:"fixed",children:[Object(n.jsx)(ae.a,{to:"/",children:Object(n.jsx)("img",{src:Ee,alt:"groupomania brand",style:{width:"200px",position:"absolute",left:"50vw",top:"14px",transform:"translate(-50%, 0)"}})}),Object(n.jsx)(Pe.a,{className:"nav-container"})]})}}]),a}(o.Component),Ae=Object(O.b)((function(e){return{authenticated:e.user.authenticated}}))(De),Be=a(105),We=Object(O.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,a=e.authenticated,o=Object(Be.a)(e,["component","authenticated"]);return Object(n.jsx)(l.Route,Object(y.a)(Object(y.a)({},o),{},{render:function(e){return!0===a?Object(n.jsx)(l.Redirect,{to:"/"}):Object(n.jsx)(t,Object(y.a)({},e))}}))})),_e=Object(O.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,a=e.authenticated,o=Object(Be.a)(e,["component","authenticated"]);return Object(n.jsx)(l.Route,Object(y.a)(Object(y.a)({},o),{},{render:function(e){return a?Object(n.jsx)(t,Object(y.a)({},e)):Object(n.jsx)(l.Redirect,{to:"/login"})}}))})),Me=a(274);a(229);function Re(){return Object(n.jsx)("div",{className:"loadingio-spinner-dual-ball-ewdix10y24j",children:Object(n.jsxs)("div",{className:"ldio-x72s767wdsh",children:[Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{})]})})}var ze=a(271),Le=a(272),Ye=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={body:"",errors:{},imageUrl:""},e.handleChange=function(t){e.setState(Object(le.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createPost({body:e.state.body,imageUrl:e.state.imageUrl}),e.state.body.length&&(e.setState({body:"",imageUrl:"",errors:{}}),document.querySelector("textarea").value="")},e.handleEditPicture=function(){document.getElementById("imagePostInput").click()},e.handleImageChange=function(){var t=Object(ce.a)(ie.a.mark((function t(a){var n,o,r;return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.files[0],(o=new FormData).append("image",n,"post"),o.append("pathToSave","public/images/posts/"),t.next=6,e.props.uploadImagePost(o);case 6:r=t.sent,e.setState({imageUrl:r});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(Z.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors}),e.UI.errors||e.UI.loading||this.setState({body:"",errors:{}})}},{key:"render",value:function(){var e=this.state,t=e.errors,a=e.imageUrl,r=this.props,s=r.classes,i=r.UI.loading;return Object(n.jsxs)(ze.a,{className:s.card,fullWidth:!0,children:[Object(n.jsx)("h2",{className:s.title,children:" Partagez du contenu ! "}),Object(n.jsx)("p",{style:{textAlign:"center",margin:"0",fontSize:"50px"},children:"\ud83d\udc47"}),Object(n.jsx)(Le.a,{className:s.cardContent,children:Object(n.jsx)("form",{onSubmit:this.handleSubmit,className:s.form,children:a?Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)("img",{src:a,className:s.imagePost,alt:"illustration post"}),Object(n.jsx)(he.a,{name:"body",type:"text",label:"Un commentaire",multiline:!0,rows:"2",placeholder:"\xc9crire ici un commentaire",error:!!t.body,helperText:t.body,className:s.textField,onChange:this.handleChange,fullWidth:!0}),Object(n.jsxs)(ue.a,{type:"submit",variant:"contained",color:"primary",className:s.submitButton,disabled:i,children:["Poster",i&&Object(n.jsx)(Oe.a,{size:30,className:s.progressSpinner})]})]}):Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)("input",{type:"file",id:"imagePostInput",onChange:this.handleImageChange,hidden:"hidden"}),Object(n.jsx)(re,{tip:"Ajouter une image",onClick:this.handleEditPicture,children:Object(n.jsx)(Ce.a,{color:"primary",style:{fontSize:"60px"}})})]})})})]})}}]),a}(o.Component),Ve=Object(O.b)((function(e){return{UI:e.UI,data:e.data}}),{createPost:Se,uploadImagePost:Ie})(de()((function(e){return Object(y.a)(Object(y.a)({},e.spreadThis),{},{card:{position:"relative",marginBottom:20,padding:"0 30px",margin:"0 10px"},cardContent:{paddingTop:"0px"},title:{fontSize:"26px",textAlign:"center",marginBottom:"5px",fontWeight:"400",color:"rgb(15, 31, 65)"},submitButton:{position:"relative",float:"right",marginTop:10},progressSpinner:{position:"absolute"},closeButton:{position:"absolute",left:"88%",top:"0%"},form:{display:"flex",flexDirection:"column",alignItems:"center"},addPhoto:{width:"120px",height:"120px"}})}))(Ye)),He=a(151),qe=a(30),Je=a.n(qe),Ge=a(96),Xe=a.n(Ge),Ke=(a(140),a(273)),Qe=a(97),Ze=a.n(Qe),$e=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={open:!1},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.deletePost=function(){e.props.deletePost(e.props.postId),e.setState({open:!1})},e}return Object(Z.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(re,{tip:"Supprimer le post",onClick:this.handleOpen,btnClassName:e.deleteButton,children:Object(n.jsx)(Ze.a,{color:"secondary"})}),Object(n.jsxs)(je.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm",children:[Object(n.jsx)(me.a,{children:"Voulez-vous vraiment supprimer ce post ?"}),Object(n.jsxs)(Ke.a,{children:[Object(n.jsx)(ue.a,{onClick:this.handleClose,color:"primary",children:"Annuler"}),Object(n.jsx)(ue.a,{onClick:this.deletePost,color:"secondary",children:"Supprimer"})]})]})]})}}]),a}(o.Component),et=Object(O.b)(null,{deletePost:function(e){return function(t){b.a.delete("https://projet7-oc-api.herokuapp.com/api/posts/delete/".concat(e)).then((function(){t({type:W,payload:e})})).catch((function(e){return console.log(e)}))}}})(de()({deleteButton:{position:"absolute",right:"0px",top:"0px"}})($e)),tt=a(152),at=a.n(tt),nt=a(119),ot=a.n(nt),rt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).likedPost=function(){return!(!e.props.user.likes.length||!e.props.user.likes.find((function(t){return t.postId===e.props.postId})))},e.likePost=function(){e.props.likePost(e.props.postId)},e.unlikePost=function(){e.props.unlikePost(e.props.postId)},e}return Object(Z.a)(a,[{key:"render",value:function(){return this.props.user.authenticated?this.likedPost()?Object(n.jsx)(re,{tip:"Je n'aime plus",onClick:this.unlikePost,children:Object(n.jsx)(at.a,{color:"primary"})}):Object(n.jsx)(re,{tip:"J'aime",onClick:this.likePost,children:Object(n.jsx)(ot.a,{color:"primary"})}):Object(n.jsx)(c.b,{to:"/login",children:Object(n.jsx)(re,{tip:"Like",children:Object(n.jsx)(ot.a,{color:"primary",children:"/"})})})}}]),a}(o.Component),st={likePost:function(e){return function(t){b.a.put("https://projet7-oc-api.herokuapp.com/api/posts/like/".concat(e)).then((function(e){t({type:A,payload:e.data})})).catch((function(e){return console.log(e)}))}},unlikePost:function(e){return function(t){b.a.put("https://projet7-oc-api.herokuapp.com/api/posts/unlike/".concat(e)).then((function(e){t({type:B,payload:e.data})})).catch((function(e){return console.log(e)}))}}},it=Object(O.b)((function(e){return{user:e.user}}),st)(rt),ct=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={open:!1},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.deleteComment=function(){e.props.deleteComment(e.props.commentId),e.setState({open:!1})},e}return Object(Z.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(re,{tip:"Supprimer le commentaire",onClick:this.handleOpen,btnClassName:e.deleteButton,children:Object(n.jsx)(Ze.a,{color:"secondary"})}),Object(n.jsxs)(je.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm",children:[Object(n.jsx)(me.a,{children:"Voulez-vous vraiment supprimer ce commentaire ?"}),Object(n.jsxs)(Ke.a,{children:[Object(n.jsx)(ue.a,{onClick:this.handleClose,color:"primary",children:"Annuler"}),Object(n.jsx)(ue.a,{onClick:this.deleteComment,color:"secondary",children:"Supprimer"})]})]})]})}}]),a}(o.Component),lt=Object(O.b)(null,{deleteComment:function(e){return function(t){b.a.delete("https://projet7-oc-api.herokuapp.com/api/posts/delete-comment/".concat(e)).then((function(){t({type:R,payload:e})})).catch((function(e){return console.log(e)}))}}})(de()({deleteButton:{position:"absolute",right:"-50px",top:"-5px"}})(ct)),pt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object(Z.a)(a,[{key:"render",value:function(){Je.a.extend(Xe.a),Je.a.locale("fr");var e=this.props,t=e.comments,a=e.classes,r=e.user,s=r.authenticated,i=r.credentials,l=i.privilege,p=i.pseudo;return Object(n.jsx)(Me.a,{container:!0,children:t.map((function(e,r){var i=e.body,d=e.createdAt,u=e.imageUrl,h=e.userPseudo,j=e.commentId,m=s&&(h===p||l)?Object(n.jsx)(lt,{commentId:j}):null;return Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(Me.a,{item:!0,sm:12,children:Object(n.jsxs)(Me.a,{container:!0,children:[Object(n.jsx)(Me.a,{item:!0,sm:2,children:Object(n.jsx)("img",{src:u,alt:"comment",className:a.commentImage})}),Object(n.jsx)(Me.a,{item:!0,sm:9,children:Object(n.jsxs)("div",{className:a.commentData,children:[Object(n.jsx)(Te.a,{variant:"h5",component:c.b,to:"/users/".concat(h),color:"primary",children:h}),Object(n.jsx)(Te.a,{variant:"body2",color:"textSecondary",children:Je()(d).format("DD MMMM YYYY, H:mm")}),m,Object(n.jsx)("hr",{className:a.invisibleSeparator}),Object(n.jsx)(Te.a,{variant:"body1",children:i})]})})]})}),r!==t.length-1&&Object(n.jsx)("hr",{className:a.visibleSeparator})]},d)}))})}}]),a}(o.Component),dt=Object(O.b)((function(e){return{post:e.data.post,user:e.user,comments:e.data.post.comments}}))(de()((function(e){return Object(y.a)(Object(y.a)({},e.spreadThis),{},{commentImage:{maxWidth:"100%",width:70,height:70,objectFit:"cover",borderRadius:"50%"},commentData:{marginLeft:20,position:"relative"}})}))(pt)),ut=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={body:"",errors:{}},e.handleChange=function(t){e.setState(Object(le.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.submitComment(e.props.postId,{body:e.state.body}),e.setState({body:""})},e}return Object(Z.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.authenticated,o=this.state.errors;return a?Object(n.jsxs)(Me.a,{item:!0,sm:12,style:{textAlign:"center",marginTop:"20px",width:"100%"},children:[Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsx)(he.a,{name:"body",type:"text",label:"Commenter ce post",erros:!!o.comment,helperText:o.comment,value:this.state.body,onChange:this.handleChange,fullWidth:!0,className:t.textfield}),Object(n.jsx)(ue.a,{type:"submit",variant:"contained",color:"primary",className:t.button,children:"Envoyer"})]}),Object(n.jsx)("hr",{className:t.visibleSeparator})]}):null}}]),a}(o.Component),ht=Object(O.b)((function(e){return{UI:e.UI,authenticated:e.user.authenticated}}),{submitComment:function(e,t){return function(a){b.a.post("https://projet7-oc-api.herokuapp.com/api/posts/".concat(e,"/comment"),t).then((function(e){console.log(e.data),a({type:M,payload:e.data}),a(ke())})).catch((function(e){a({type:k,payload:e.response.data})}))}}})(de()((function(e){return{}}))(ut)),jt=a(98),mt=a.n(jt),bt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object(Z.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.post,o=a.postId,r=a.content,s=a.createdAt,i=a.likeCount,l=a.commentCount,p=a.imageUrl,d=a.userImage,u=a.userPseudo,h=a.comments;return e.UI.loading?Object(n.jsx)("div",{className:t.spinnerDiv,children:Object(n.jsx)(Oe.a,{size:200,thickness:2})}):Object(n.jsxs)(Me.a,{container:!0,spacing:16,children:[Object(n.jsx)(Me.a,{item:!0,sm:2,children:Object(n.jsx)("img",{src:d,alt:"Profile",className:t.profileImage})}),Object(n.jsxs)(Me.a,{item:!0,sm:10,children:[Object(n.jsx)(Te.a,{component:c.b,color:"primary",variant:"h5",tp:"/users/".concat(u),children:u}),Object(n.jsx)("hr",{className:t.invisibleSeparator}),Object(n.jsx)(Te.a,{variant:"body2",color:"textSecondary",children:Je()(s).format("DD MMMM YYYY, H:mm")}),Object(n.jsx)("hr",{className:t.invisibleSeparator}),Object(n.jsx)(Te.a,{variant:"body1",children:r}),Object(n.jsx)("img",{src:p,className:t.imagePost,alt:"illustration post"}),Object(n.jsx)(it,{postId:o}),Object(n.jsxs)("span",{children:[" ",i," J'aime "]}),Object(n.jsx)(re,{tip:"comments",children:Object(n.jsx)(mt.a,{color:"primary"})}),Object(n.jsxs)("span",{children:[l," commentaire",+l>1?"s":""," "]})]}),Object(n.jsx)("hr",{className:t.visibleSeparator}),Object(n.jsx)(dt,{comments:h}),Object(n.jsx)(ht,{postId:o})]})}}]),a}(o.Component),Ot=Object(O.b)((function(e){return{post:e.data.post,UI:e.UI}}))(de()((function(e){return Object(y.a)(Object(y.a)({},e.spreadThis),{},{profileImage:{width:70,height:70,borderRadius:"50%",objectFit:"cover"},dialogContent:{padding:20},closeButton:{position:"absolute",right:"3px"},spinnerDiv:{textAlign:"center",marginTop:50,marginBottom:50},imagePost:{margin:"17px auto",width:"100%"}})}))(bt)),xt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={open:!1,oldPath:"",newPath:""},e.handleOpen=function(){var t=window.location.pathname,a=e.props,n=a.pseudo,o=a.postId,r="/users/".concat(n,"/post/").concat(o);t===r&&(t="/users/".concat(n)),window.history.pushState(null,null,r),e.setState({open:!0,oldPath:t,newPath:r}),e.props.getPost(e.props.postId)},e.handleClose=function(){window.history.pushState(null,null,e.state.oldPath),e.setState({open:!1})},e}return Object(Z.a)(a,[{key:"componentDidMount",value:function(){this.props.openDialog&&this.handleOpen()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.commentCountFix;return Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(re,{onClick:this.handleOpen,tip:"Commentaires",tipClassName:t.expandButton,children:Object(n.jsx)(mt.a,{color:"primary"})}),Object(n.jsxs)("span",{children:[" ",a," commentaire",+a>1?"s":""," "]}),Object(n.jsxs)(je.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm",children:[Object(n.jsx)(re,{tip:"Fermer",onClick:this.handleClose,tipClassName:t.closeButton,children:Object(n.jsx)(ye.a,{})}),Object(n.jsx)(be.a,{className:t.dialogContent,children:Object(n.jsx)(Ot,{})})]})]})}}]),a}(o.Component),ft={getPost:function(e){return function(t){t({type:w}),b.a.get("https://projet7-oc-api.herokuapp.com/api/posts/post/".concat(e)).then((function(e){t({type:E,payload:e.data}),t({type:U})})).catch((function(e){return console.log(e)}))}}},gt=Object(O.b)((function(e){return{post:e.data.post,UI:e.UI}}),ft)(de()((function(e){return Object(y.a)(Object(y.a)({},e.spreadThis),{},{profileImage:{width:70,height:70,borderRadius:"50%",objectFit:"cover"},dialogContent:{padding:20},closeButton:{position:"absolute",right:"3px"},spinnerDiv:{textAlign:"center",marginTop:50,marginBottom:50},imagePost:{margin:"17px auto",width:"100%"}})}))(xt)),yt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object(Z.a)(a,[{key:"render",value:function(){Je.a.extend(Xe.a),Je.a.locale("fr");var e=this.props,t=e.classes,a=e.post,o=a.content,r=a.createdAt,s=a.imageUrl,i=a.userImage,c=a.userPseudo,l=a.postId,p=a.likeCount,d=a.commentCount,u=e.user,h=u.authenticated,j=u.credentials,m=j.pseudo,b=j.privilege,O=h&&(c===m||b)?Object(n.jsx)(et,{postId:l}):null;return Object(n.jsxs)(ze.a,{className:t.card,type:"post",children:[Object(n.jsxs)("div",{className:"image-wrapper",children:[Object(n.jsx)("img",{src:i,alt:"profile",className:"profile-image"}),Object(n.jsx)(Te.a,{variant:"subtitle1",component:ae.a,to:"/users/".concat(c),color:"primary",className:t.pseudoContainer,children:c})]}),Object(n.jsxs)(Le.a,{className:t.content,children:[O,Object(n.jsx)(Te.a,{variant:"body2",color:"textSecondary",children:Je()(r,"").fromNow()}),Object(n.jsx)("img",{src:s,className:t.imagePost,alt:"illustration post"}),Object(n.jsxs)("p",{children:[" ",o," "]}),Object(n.jsxs)("div",{className:t.interaction,children:[Object(n.jsxs)("div",{className:"bloc",children:[Object(n.jsx)(it,{postId:l,className:t.button}),Object(n.jsxs)("span",{children:[p," J'aime "]})]}),Object(n.jsx)("div",{className:"bloc",children:Object(n.jsx)(gt,{postId:l,pseudo:m,commentCountFix:d,openDialog:this.props.openDialog})})]})]})]})}}]),a}(o.Component),vt=Object(O.b)((function(e){return{user:e.user}}))(de()({card:{position:"relative",display:"flex",marginBottom:20,margin:"0 10px","& .image-wrapper":{maxWidth:"70px",textAlign:"center",position:"relative",padding:"10px",display:"flex",flexDirection:"column",alignItems:"center"},"& .content":{},"& .profile-image":{width:"60px",height:"60px",objectFit:"cover",borderRadius:"50%"}},image:{minWidth:200},content:{padding:25,objectFit:"cover",flexGrow:1,display:"flex",flexDirection:"column"},imagePost:{margin:"10px auto",width:"100%",maxWidth:"450px"},pseudoContainer:{width:"90px",whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis"},interaction:{display:"flex",flexDirection:"row",flexWrap:"wrap","& .bloc":{margin:"0 15px"}}})(yt)),Ct=a(120),St=a(153),It=a.n(St),kt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={bio:"",job:"",team:"",openEdit:!1,openConfirmation:!1},e.mapUserDetailsToState=function(t){e.setState({bio:t.bio?t.bio:"",job:t.job?t.job:"",team:t.team?t.team:""})},e.handleOpenEdit=function(){e.setState({openEdit:!0}),e.mapUserDetailsToState(e.props.credentials)},e.handleOpenConfirmation=function(){e.setState({openConfirmation:!0}),e.mapUserDetailsToState(e.props.credentials)},e.handleCloseEdit=function(){e.setState({openEdit:!1})},e.handleCloseConfirmation=function(){e.setState({openConfirmation:!1})},e.componentDidMount=function(){var t=e.props.credentials;e.mapUserDetailsToState(t)},e.handleChange=function(t){e.setState(Object(le.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t={bio:e.state.bio,job:e.state.job,team:e.state.team};e.props.editUserDetails(t),e.handleCloseEdit()},e.handleDelete=function(){e.props.deleteUser(),e.props.logoutUser()},e}return Object(Z.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(re,{tip:"Modifier les informations",onClick:this.handleOpenEdit,btnClassName:e.button,children:Object(n.jsx)(It.a,{color:"primary"})}),Object(n.jsxs)(je.a,{open:this.state.openEdit,onClose:this.handleCloseEdit,fullWidth:!0,maxWidth:"sm",children:[Object(n.jsx)(me.a,{children:" Modifier vos informations "}),Object(n.jsx)(be.a,{children:Object(n.jsxs)("form",{children:[Object(n.jsx)(he.a,{name:"bio",type:"text",label:"Bio",multiline:!0,rows:"3",placeholder:"Une courte pr\xe9sentation de vous-m\xeame \ud83d\ude42",className:e.textField,value:this.state.bio,onChange:this.handleChange,fullWidth:!0,children:" "}),Object(n.jsx)(he.a,{name:"job",type:"text",label:"Job",placeholder:"Votre emploi au sein de Groupomania \ud83d\udc68\u200d\ud83d\udcbb",className:e.textField,value:this.state.job,onChange:this.handleChange,fullWidth:!0,children:" "}),Object(n.jsx)(he.a,{name:"team",type:"text",label:"Team",placeholder:"Votre \xe9quipe \ud83c\udfd7",className:e.textField,value:this.state.team,onChange:this.handleChange,fullWidth:!0,children:" "})]})}),Object(n.jsxs)(Ke.a,{children:[Object(n.jsx)(ue.a,{onClick:this.handleOpenConfirmation,color:"secondary",children:"Supprimer ce profil"}),Object(n.jsx)(ue.a,{onClick:this.handleCloseEdit,color:"primary",children:"Annuler"}),Object(n.jsx)(ue.a,{onClick:this.handleSubmit,color:"primary",children:"Enregistrer"})]})]}),Object(n.jsxs)(je.a,{open:this.state.openConfirmation,children:[Object(n.jsxs)(me.a,{children:[" ","Souhaitez-vous vraiment supprimer votre profil ?"," "]}),Object(n.jsxs)(Ke.a,{children:[Object(n.jsx)(ue.a,{onClick:this.handleDelete,color:"secondary",children:"Oui"}),Object(n.jsx)(ue.a,{onClick:this.handleCloseConfirmation,color:"primary",children:"Non"})]})]})]})}}]),a}(o.Component),wt=Object(O.b)((function(e){return{credentials:e.user.credentials}}),{editUserDetails:function(e){return function(t){t({type:I}),b.a.post("https://projet7-oc-api.herokuapp.com/api/user/editProfile",e).then((function(){t(G())})).catch((function(e){console.log(e)}))}},logoutUser:J,deleteUser:function(){return function(e){b.a.delete("https://projet7-oc-api.herokuapp.com/api/user/delete").then((function(){console.log("Votre profil a bien \xe9t\xe9 supprim\xe9 !")})).catch((function(e){console.log(e)}))}}})(de()((function(e){return Object(y.a)(Object(y.a)({},e.spreadThis),{},{button:{float:"right"}})}))(kt)),Nt=a(102),Pt=a.n(Nt),Ut=a(101),Tt=a.n(Ut),Ft=a(103),Et=a.n(Ft),Dt=a(104),At=a.n(Dt),Bt=a(100),Wt=a.n(Bt),_t=a(99),Mt=a.n(_t),Rt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleImageChange=function(t){var a=t.target.files[0],n=new FormData;n.append("image",a,"profil"),n.append("pathToSave","public/images/users/"),e.props.uploadImage(n)},e.handleEditPicture=function(){document.getElementById("imageInput").click()},e.handleLogout=function(){e.props.logoutUser()},e}return Object(Z.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.user,r=a.credentials,s=r.pseudo,i=r.privilege,l=r.createdAt,p=r.team,d=r.job,u=r.bio,h=r.imageUrl,j=a.loading,m=a.authenticated;return j?Object(n.jsx)(Re,{}):m?Object(n.jsx)(Ct.a,{className:t.paper,children:Object(n.jsxs)("div",{className:t.profile,children:[Object(n.jsxs)("div",{className:"image-wrapper",onClick:this.handleEditPicture,children:[Object(n.jsx)("img",{src:h,alt:"profile",className:"profile-image"}),Object(n.jsx)(Mt.a,{className:"button"}),Object(n.jsx)("input",{type:"file",id:"imageInput",onChange:this.handleImageChange,hidden:"hidden"})]}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:"profile-details",children:[Object(n.jsxs)(Ue.a,{component:c.b,to:"/users/".concat(s),color:"primary",variant:"h5",children:["@",s]}),i?Object(n.jsx)(Wt.a,{color:"primary",className:"adminicon"}):"",Object(n.jsx)("hr",{}),u&&Object(n.jsx)(Te.a,{variant:"body2",children:u}),Object(n.jsx)("hr",{}),d&&Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(Tt.a,{color:"primary"})," ",Object(n.jsxs)("span",{children:[" ",d," "]}),Object(n.jsx)("hr",{})]}),p&&Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(Pt.a,{color:"primary"})," ",Object(n.jsxs)("span",{children:[" ",p," "]}),Object(n.jsx)("hr",{})]}),Object(n.jsx)(Et.a,{color:"primary"})," ",Object(n.jsxs)("span",{children:["Inscrit depuis le ",Je()(l).format("DD/MM/YYYY")]})]}),Object(n.jsx)(re,{tip:"Se d\xe9connecter",onClick:this.handleLogout,btnClassName:"button",children:Object(n.jsx)(At.a,{color:"primary"})}),Object(n.jsx)(wt,{})]})}):Object(n.jsx)(Ct.a,{className:t.paper,children:Object(n.jsxs)(Te.a,{variant:"body2",align:"center",children:["Aucun profil correspondant, veuillez vous identifier \xe0 nouveau",Object(n.jsxs)("div",{className:t.buttons,children:[Object(n.jsx)(ue.a,{variant:"contained",color:"primary",component:c.b,to:"/login",children:"S'identifier"}),Object(n.jsx)(ue.a,{variant:"contained",color:"secondary",component:c.b,to:"/signup",children:"S'inscrire"})]})]})})}}]),a}(o.Component),zt={logoutUser:J,uploadImage:X},Lt=Object(O.b)((function(e){return{user:e.user}}),zt)(de()((function(e){return{paper:{padding:10,marginBottom:"20px"},profile:{margin:"0 10px","& .image-wrapper":{position:"relative",width:"15vw",height:"15vw",minWidth:"100px",minHeight:"100px",borderRadius:"50%",margin:"auto","& svg":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"3rem",color:"white !important",cursor:"pointer",visibility:"hidden"},"&:hover .profile-image":{opacity:.7},"&:hover svg":{opacity:.7,visibility:"visible"}},"& .profile-image":{objectFit:"cover",margin:"auto",maxWidth:"100%",width:"15vw",height:"15vw",borderRadius:"50%",minWidth:"100px",minHeight:"100px",transition:"all .2s linear",cursor:"pointer"},"& .profile-details":{textAlign:"center","& span , svg":{verticalAlign:"middle"},"& a ":{color:e.palette.primary.main}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}},buttons:{textAlign:"center","& a":{margin:"20px 10px"}},"& .adminicon":{margin:"0 5px"}}}}))(Rt)),Yt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(Q.a)(this,a),t.apply(this,arguments)}return Object(Z.a)(a,[{key:"componentDidMount",value:function(){this.props.getPosts()}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.posts,o=t.loading;document.querySelector("html").style.background="",document.querySelector("body").style.background="transparent";var r=a.map((function(e){return Object(n.jsx)(vt,{post:e},e.postId)}));return Object(n.jsxs)(Me.a,{container:!0,spacing:16,children:[Object(n.jsx)(Me.a,{item:!0,sm:3,xs:12,children:Object(n.jsx)(Lt,{})}),Object(n.jsxs)(Me.a,{item:!0,sm:9,xs:12,children:[Object(n.jsx)(Ve,{}),Object(n.jsx)(He.a,{dataLength:a.length,next:function(){return e.props.getMorePosts(e.props.data.posts.length)},hasMore:!0,scrollThreshold:"100px",children:r}),o&&Object(n.jsx)(Re,{})]})]})}}]),a}(o.Component),Vt=Object(O.b)((function(e){return{data:e.data}}),{getPosts:function(e){return function(t){t({type:P}),b.a.get("https://projet7-oc-api.herokuapp.com/api/posts",{params:{offset:e}}).then((function(e){t({type:T,payload:e.data})})).catch((function(e){t({type:T,payload:[]})}))}},getMorePosts:function(e){return function(t){t({type:P}),b.a.get("https://projet7-oc-api.herokuapp.com/api/posts",{params:{offset:e}}).then((function(e){t({type:D,payload:e.data})})).catch((function(e){t({type:D,payload:[]})}))}}})(Yt),Ht=a.p+"static/media/icon-above-font.6c50863d.png",qt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Q.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var a={mail:e.state.email,password:e.state.password};e.props.loginUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(le.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",errors:{}},e}return Object(Z.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,o=this.state.errors,r=document.querySelector("html");return r.style.background='url("https://projet7-oc-api.herokuapp.com/public/images/abstract-blur-hotel-interior-compressed.jpg")',r.style.backgroundPosition="center",r.style.backgroundSize="cover",document.querySelector("body").style.background="transparent",Object(n.jsx)(Me.a,{container:!0,justify:"center",className:t.form,children:Object(n.jsxs)(Me.a,{sm:"5",item:!0,className:t.formpart,children:[Object(n.jsx)("img",{src:Ht,alt:"groupomania",className:t.image}),Object(n.jsx)(Te.a,{variant:"h2",className:t.pageTitle,children:"S'identifier"}),Object(n.jsxs)("form",{noValidate:!0,onSubmit:this.handleSubmit,children:[Object(n.jsx)(he.a,{id:"email",name:"email",type:"email",label:"Mail",className:t.textField,helperText:o.email,error:!!o.email,value:this.state.email,onChange:this.handleChange,fullWidth:!0}),Object(n.jsx)(he.a,{id:"password",name:"password",type:"password",label:"Mot de passe",className:t.textField,helperText:o.password,error:!!o.password,value:this.state.password,onChange:this.handleChange,fullWidth:!0}),o.general&&Object(n.jsx)(Te.a,{variant:"body2",className:t.customError,children:o.general}),Object(n.jsxs)(ue.a,{type:"submit",variant:"contained",color:"primary",className:"button",disabled:a,children:["S'identifier",a&&Object(n.jsx)(Oe.a,{size:30,className:t.progress})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:["Pas de compte encore ? Inscrivez-vous"," ",Object(n.jsx)(c.b,{to:"/signup",children:" ici "})]})]})]})})}}]),a}(o.Component),Jt={loginUser:function(e,t){return function(a){a({type:w}),b.a.post("https://projet7-oc-api.herokuapp.com/api/user/login",e).then((function(e){K(e.data.token),a(G()),a({type:N}),t.push("/")})).catch((function(e){a({type:k,payload:e.response.data})}))}}},Gt=Object(O.b)((function(e){return{user:e.user,UI:e.UI}}),Jt)(de()((function(e){return Object(y.a)({},e.spreadThis)}))(qt)),Xt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;return Object(Q.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault(),e.setState({loading:!0});var a={mail:e.state.email,password:e.state.password,confirmPassword:e.state.confirmPassword,handle:e.state.handle};e.props.signupUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(le.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",confirmPassword:"",handle:"",errors:{}},e}return Object(Z.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,o=this.state.errors,r=document.querySelector("html");return r.style.background='url("https://projet7-oc-api.herokuapp.com/public/images/abstract-blur-hotel-interior-compressed.jpg")',r.style.backgroundPosition="center",r.style.backgroundSize="cover",document.querySelector("body").style.background="transparent",Object(n.jsx)(Me.a,{container:!0,justify:"center",className:t.form,children:Object(n.jsxs)(Me.a,{sm:"5",item:!0,className:t.formpart,children:[Object(n.jsx)("img",{src:Ht,alt:"groupomania",className:t.image}),Object(n.jsx)(Te.a,{variant:"h2",className:t.pageTitle,children:"S'inscrire"}),Object(n.jsxs)("form",{noValidate:!0,onSubmit:this.handleSubmit,children:[Object(n.jsx)(he.a,{id:"email",name:"email",type:"email",label:"Mail",className:t.textField,helperText:o.email,error:!!o.email,value:this.state.email,onChange:this.handleChange,fullWidth:!0}),Object(n.jsx)(he.a,{id:"password",name:"password",type:"password",label:"Mot de passe",className:t.textField,helperText:o.password,error:!!o.password,value:this.state.password,onChange:this.handleChange,fullWidth:!0}),Object(n.jsx)(he.a,{id:"confirmPassword",name:"confirmPassword",type:"password",label:"Confirmez le mot de passe",className:t.textField,helperText:o.confirmPassword,error:!!o.confirmPassword,value:this.state.confirmPassword,onChange:this.handleChange,fullWidth:!0}),Object(n.jsx)(he.a,{id:"handle",name:"handle",type:"text",label:"Pseudo",className:t.textField,helperText:o.handle,error:!!o.handle,value:this.state.handle,onChange:this.handleChange,fullWidth:!0}),o.general&&Object(n.jsx)(Te.a,{variant:"body2",className:t.customError,children:o.general}),Object(n.jsxs)(ue.a,{type:"submit",variant:"contained",color:"primary",className:"button",disabled:a,children:["S'inscrire",a&&Object(n.jsx)(Oe.a,{size:30,className:t.progress})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:["Vous avez d\xe9j\xe0 un compte ? Identifiez-vous"," ",Object(n.jsx)(c.b,{to:"/login",children:" ici "})]})]})]})})}}]),a}(o.Component),Kt=Object(O.b)((function(e){return{user:e.user,UI:e.UI}}),{signupUser:function(e,t){return function(a){a({type:w}),b.a.post("https://projet7-oc-api.herokuapp.com/api/user/signup",e).then((function(e){K(e.data.token),a(G()),a({type:N}),t.push("/")})).catch((function(e){a({type:k,payload:e.response.data})}))}}})(de()((function(e){return Object(y.a)({},e.spreadThis)}))(Xt)),Qt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={openConfirmation:!1},e.handleOpenConfirmation=function(){e.setState({openConfirmation:!0})},e.handleCloseConfirmation=function(){e.setState({openConfirmation:!1})},e.handleDelete=function(t){var a=t.currentTarget.getAttribute("pseudo");e.props.deleteOtherUser(a),window.location.assign("/")},e.handleImageChange=function(t){var a=t.target.files[0],n=new FormData;n.append("image",a,"profil"),n.append("pathToSave","public/images/users/"),e.props.uploadImage(n)},e.handleEditPicture=function(){document.getElementById("imageInput").click()},e.handleLogout=function(){e.props.logoutUser()},e}return Object(Z.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.user,r=a.loading,s=a.credentials,i=e.profile,l=i.pseudo,p=i.privilege,d=i.createdAt,u=i.team,h=i.job,j=i.bio,m=i.imageUrl;return r?Object(n.jsx)(Re,{}):Object(n.jsx)(Ct.a,{className:t.paper,children:Object(n.jsxs)("div",{className:t.profile,children:[Object(n.jsxs)("div",{className:"image-wrapper",onClick:l===s.pseudo?this.handleEditPicture:"",children:[Object(n.jsx)("img",{src:m,alt:"profile",className:"profile-image"}),l===s.pseudo&&Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(Mt.a,{className:"button"}),Object(n.jsx)("input",{type:"file",id:"imageInput",onChange:this.handleImageChange,hidden:"hidden"})]})]}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:"profile-details",children:[Object(n.jsxs)(Ue.a,{component:c.b,to:"/users/".concat(l),color:"primary",variant:"h5",children:["@",l]}),p?Object(n.jsx)(Wt.a,{color:"primary",className:"adminicon"}):"",Object(n.jsx)("hr",{}),j&&Object(n.jsx)(Te.a,{variant:"body2",children:j}),Object(n.jsx)("hr",{}),h&&Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(Tt.a,{color:"primary"})," ",Object(n.jsxs)("span",{children:[" ",h," "]}),Object(n.jsx)("hr",{})]}),u&&Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(Pt.a,{color:"primary"})," ",Object(n.jsxs)("span",{children:[" ",u," "]}),Object(n.jsx)("hr",{})]}),Object(n.jsx)(Et.a,{color:"primary"})," ",Object(n.jsxs)("span",{children:["Inscrit depuis le ",Je()(d).format("DD/MM/YYYY")]})]}),l===s.pseudo?Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)(re,{tip:"Se d\xe9connecter",onClick:this.handleLogout,btnClassName:"button",children:Object(n.jsx)(At.a,{color:"primary"})}),Object(n.jsx)(wt,{})]}):1===s.privilege&&Object(n.jsxs)(o.Fragment,{children:[Object(n.jsx)("div",{className:t.suppression,children:Object(n.jsx)(ue.a,{onClick:this.handleOpenConfirmation,color:"secondary",children:"Supprimer ce profil"})}),Object(n.jsxs)(je.a,{open:this.state.openConfirmation,children:[Object(n.jsxs)(me.a,{children:[" ","Souhaitez-vous vraiment supprimer ce profil ?"," "]}),Object(n.jsxs)(Ke.a,{children:[Object(n.jsx)(ue.a,{onClick:this.handleDelete,color:"secondary",pseudo:l,children:"Oui"}),Object(n.jsx)(ue.a,{onClick:this.handleCloseConfirmation,color:"primary",children:"Non"})]})]})]})]})})}}]),a}(o.Component),Zt=Object(O.b)((function(e){return{user:e.user}}),{logoutUser:J,deleteOtherUser:function(e){return function(t){b.a.delete("https://projet7-oc-api.herokuapp.com/api/user/delete/".concat(e)).then((function(){console.log("Ce profil a bien \xe9t\xe9 supprim\xe9 !")})).catch((function(e){console.log(e)}))}}})(de()((function(e){return{paper:{padding:10,marginBottom:"20px"},suppression:{display:"flex",justifyContent:"center"},profile:{margin:"0 10px","& .image-wrapper":{position:"relative",width:"15vw",height:"15vw",minWidth:"100px",minHeight:"100px",borderRadius:"50%",margin:"auto","& svg":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"3rem",color:"white !important",cursor:"pointer",visibility:"hidden"},"&:hover .profile-image":{opacity:.7},"&:hover svg":{opacity:.7,visibility:"visible"}},"& .profile-image":{objectFit:"cover",margin:"auto",maxWidth:"100%",width:"15vw",height:"15vw",borderRadius:"50%",minWidth:"100px",minHeight:"100px",transition:"all .2s linear",cursor:"pointer"},"& .profile-details":{textAlign:"center","& span , svg":{verticalAlign:"middle"},"& a ":{color:e.palette.primary.main}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}},buttons:{textAlign:"center","& a":{margin:"20px 10px"}},"& .adminicon":{margin:"0 5px"}}}}))(Qt)),$t=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(Q.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={profile:null,postIdParam:null},e}return Object(Z.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.pseudo,a=this.props.match.params.postId;this.setState({postIdParam:a}),this.props.getUserPosts(t),b.a.get("https://projet7-oc-api.herokuapp.com/api/user/informations/".concat(t)).then((function(t){e.setState({profile:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.props.data,t=e.posts,a=e.loading,r=this.state.postIdParam,s=a?Object(n.jsx)(Re,{}):0===t.length?Object(n.jsxs)(o.Fragment,{children:[Object(n.jsxs)("p",{style:{fontSize:"20px",textAlign:"center"},children:[" ","Cet utilisateur n'a encore rien post\xe9 \ud83e\udd37\ud83c\udffc\u200d\u2642\ufe0f"," "]}),Object(n.jsx)("div",{className:"button-container",style:{width:"100%",display:"flex",justifyContent:"center"},children:Object(n.jsx)(ue.a,{variant:"contained",color:"primary",component:ae.a,to:"/signup",children:"Retour \xe0 la page d'accueil"})})]}):r?t.map((function(e,t){return e.postId!==+r?Object(n.jsx)(vt,{post:e},e.postId):Object(n.jsx)(vt,{post:e,openDialog:!0},e.postId)})):t.map((function(e){return Object(n.jsx)(vt,{post:e},e.postId)}));return Object(n.jsxs)(Me.a,{container:!0,spacing:16,children:[Object(n.jsx)(Me.a,{item:!0,sm:3,xs:12,children:null===this.state.profile?Object(n.jsx)("p",{children:" Chargement du profil... "}):Object(n.jsx)(Zt,{profile:this.state.profile})}),Object(n.jsx)(Me.a,{item:!0,sm:9,xs:12,children:s})]})}}]),a}(o.Component),ea=Object(O.b)((function(e){return{data:e.data}}),{getUserPosts:function(e){return function(t){t({type:P}),b.a.get("https://projet7-oc-api.herokuapp.com/api/user/posts/".concat(e)).then((function(e){t({type:F,payload:e.data})})).catch((function(){t({type:F,payload:null})}))}}})($t),ta=h()({palette:{primary:{light:"#33CD9C",main:"#00BCD4",dark:"#008394",contrastText:"#FFFFFF"},secondary:{light:"#FF6333",main:"#FF3D00",dark:"#B22A00",contrastText:"#FFFFFF "}},spreadThis:{typography:{useNextVariants:!0},form:{textAlign:"center",backgroundColor:"transparent","& .button":{margin:"25px !important",padding:"5px 15px !important",position:"relative"}},formpart:{backgroundColor:"white",padding:"30px 40px",borderRadius:"20px",boxShadow:"0 0 15px 3px rgba(0,0,0, .5)"},image:{margin:"20px auto 20px auto",width:"200px"},groupomaniaBrand:{width:"200px"},imagePost:{width:"100%",height:"100%",maxWidth:"450px"},pageTitle:{margin:"10px auto 10px auto"},textField:{margin:"10px auto 10px auto"},customError:{color:"red",fontSize:"0.8rem",marginTop:10},progress:{position:"absolute"},invisibleSeparator:{border:"none",margin:4},visibleSeparator:{width:"100%",borderBottom:"1px solid rgba(0,0,0,.1)",maginBottom:20}}}),aa=localStorage.getItem("FBIdtoken")?localStorage.getItem("FBIdtoken").split(" ")[1]:void 0;if(aa)if(1e3*Object(j.a)(aa).exp<Date.now())window.location.href="/login",q.dispatch(J());else{q.dispatch({type:v});var na="Bearer ".concat(aa);b.a.defaults.headers.common.Authorization=na,q.dispatch(G())}var oa=function(){return Object(n.jsx)(d.a,{theme:ta,children:Object(n.jsx)(O.a,{store:q,children:Object(n.jsxs)(c.a,{children:[Object(n.jsx)(Ae,{}),Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)(l.Switch,{children:[Object(n.jsx)(We,{exact:!0,path:"/login",component:Gt}),Object(n.jsx)(We,{exact:!0,path:"/signup",component:Kt}),Object(n.jsx)(_e,{exact:!0,path:"/",component:Vt}),Object(n.jsx)(_e,{exact:!0,path:"/users/:pseudo",component:ea}),Object(n.jsx)(_e,{exact:!0,path:"/users/:pseudo/post/:postId",component:ea}),Object(n.jsx)(_e,{path:"*",component:ea})]})})]})})})},ra=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,279)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),o(e),r(e),s(e)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(oa,{})}),document.getElementById("root")),ra()}},[[230,1,2]]]);
//# sourceMappingURL=main.a19b0630.chunk.js.map